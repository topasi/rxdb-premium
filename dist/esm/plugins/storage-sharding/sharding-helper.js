import{appendToArray as r,clone as e,flatClone as t,prepareQuery as n}from"rxdb/plugins/core";export function getShardIndex(r,e){return hashStringToNumber(e)%r}export function hashStringToNumber(r){for(var e=0,t=r.length,n=0;n<t;n++)e+=r.charCodeAt(n),e|=0;return e}export function mergeSortedArray(e,t,n){if(0===e.length)return t.slice(0);if(0===t.length)return e.slice(0);for(var i=[],o=0,u=0;o<e.length&&u<t.length;)n(e[o],t[u])>0?i.push(t[u++]):i.push(e[o++]);return u<t.length?r(i,t.slice(u)):r(i,e.slice(o)),i}export function prepareShardingQuery(r,i){i=t(i);var o=e(i);return i.skip=0,i.limit&&(i.limit=i.limit+o.skip),{originalQuery:o,parentPreparedQuery:n(r,i)}}