import{ensureNotFalsy as r,lastOfArray as e}from"rxdb/plugins/core";export function indexedDBFindByIds(n,o,s){var t=o.length;if(0===t)return Promise.resolve([]);for(var a=new Array,i=0;i<t;i++){var v=o[i];a.push(n.get(v))}var d=[],u=r(e(a));return new Promise(((r,e)=>{u.onerror=e,u.onsuccess=()=>{for(var e=0;e<t;e++){var n=a[e].result;if(n){var o=n.d;!s&&o._deleted||d.push(o)}}r(d)}}))}export function indexedDBFindByIdsInternal(n,o,s){var t=s.length,a=new Map;if(0===t)return Promise.resolve(a);for(var i=new Array(t),v=0;v<t;v++){var d=s[v].document[n],u=o.get(d);i[v]=u}var f=r(e(i));return new Promise(((r,e)=>{f.onerror=e,f.onsuccess=()=>{for(var e=0;e<t;e++){var o=i[e].result;if(o){var s=o.d,v=s[n];a.set(v,s)}}r(a)}}))}