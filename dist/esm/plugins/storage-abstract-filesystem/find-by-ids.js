import{ensureNotFalsy as t}from"rxdb/plugins/core";import{getAccessHandle as e}from"./task-queue.js";import{getDocumentsJson as r,getDocumentsJsonString as a}from"./documents-file.js";import{getTotalDocumentCount as n}from"./helpers.js";export async function findDocumentsByIds(r,i,s,o){var u=await r.internals.statePromise;if(0===n(u))return"[]";for(var m=e(u.documentFileHandle,o),f=t(u.indexStates[0].metaIdMap),l=[],d=i.length,p=0;p<d;p++){var c=i[p],v=f.get(c);v&&(s||"0"===v[0][0])&&l.push(v)}if(0===l.length)return"[]";var g=await m;return await a(u,g,o,l)}export async function findDocumentsByIdsInternal(a,i,s){var o=new Map,u=await a.internals.statePromise;if(0===n(u))return o;for(var m=e(u.documentFileHandle,s),f=t(u.indexStates[0].metaIdMap),l=[],d=i.length,p=0;p<d;p++){var c=i[p],v=f.get(c);v&&l.push(v)}if(0===l.length)return o;for(var g=await m,h=await r(u,g,s,l),w=l.length,x=0;x<w;x++){var I=h[x],y=l[x][1];o.set(y,I)}return o}