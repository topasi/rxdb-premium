import{getFromMapOrCreate as t}from"rxdb/plugins/core";export var BlockMap=function(){function n(){this.map=new Map,this.cleanup=new Map}var e=n.prototype;return e.addCleanup=function(n,e){t(this.cleanup,e,(()=>new Set)).add(n)},e.add=function(t,n){this.map.set(t,n)},e.set=function(n,e){var a=this.map.get(n);return this.map.set(n,e),void 0===a||(t(this.cleanup,a,(()=>new Set)).add(n),!1)},n}();