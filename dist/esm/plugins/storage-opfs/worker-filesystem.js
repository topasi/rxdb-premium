export var WorkerOPFSFilesystem=function(){function e(){this.opfsRootPromise=navigator.storage.getDirectory()}return e.prototype.getDirectory=async function(){var e=await this.opfsRootPromise;return new WorkerOPFSFilesystemDirectory(e)},e}();export var WorkerOPFSFilesystemDirectory=function(){function e(e){this.baseDir=e}var t=e.prototype;return t.getDirectoryHandle=async function(t,n){return new e(await this.baseDir.getDirectoryHandle(t,n))},t.getFileHandle=async function(e,t){var n=await this.baseDir.getFileHandle(e,t);return new WorkerOPFSFilesystemFileHandle(e,n)},t.removeEntry=function(e){return this.baseDir.removeEntry(e)},e}();export var WorkerOPFSFilesystemFileHandle=function(){function e(e,t){this.name=e,this.fileHandle=t}return e.prototype.createAccessHandle=async function(){return new WorkerOPFSFilesystemFileSyncAccessHandle(this)},e}();export var WorkerOPFSFilesystemFileSyncAccessHandle=function(){function e(e){this.fileHandle=e,this.syncAccessHandlePromise=createSyncAccessHandleFromFileHandle(this.fileHandle)}var t=e.prototype;return t.getHandle=function(){var e=this.syncAccessHandle;return e||this.syncAccessHandlePromise.then((e=>(this.syncAccessHandle=e,e)))},t.getWritable=function(){return new WorkerOPFSFilesystemWritable(this)},t.read=async function(e,t){var n=await this.getHandle();t||(t=await n.getSize());var a=new Uint8Array(t-e);return await n.read(a,{at:e}),a},t.truncate=async function(e){var t=await this.getHandle();await t.truncate(e)},t.getSize=async function(){return(await this.getHandle()).getSize()},t.close=async function(){var e=await this.getHandle();await e.close()},e}();export var WorkerOPFSFilesystemWritable=function(){function e(e){this.accessHandle=e}var t=e.prototype;return t.write=async function(e,t){var n=await this.accessHandle.getHandle();await n.write(e,t)},t.flush=async function(){var e=await this.accessHandle.getHandle();await e.flush()},t.close=async function(){var e=await this.accessHandle.getHandle();await e.close()},e}();export async function createSyncAccessHandleFromFileHandle(e){if("function"!=typeof e.fileHandle.createSyncAccessHandle)throw new Error('Could not access fileHandle.createSyncAccessHandle(). Likely this is because this storage only works "inside dedicated Web Workers"');try{return await e.fileHandle.createSyncAccessHandle()}catch(e){throw e}}