Object.defineProperty(exports,"__esModule",{value:!0}),exports.INDEX_NAME_CLEANUP=exports.INDEXEDDB_DEFAULT_INDEX_SETITNGS=exports.CLEANUP_INDEX=void 0,exports.createIndexesOnStore=d,exports.getIndexId=t,exports.getIndexName=r,exports.getIndexableStringByIndexName=x,exports.getIndexedDBIndexesFromSchema=n,exports.normalizeIndexedDBIndex=i,exports.toIndexRow=a;var e=require("rxdb/plugins/core");function r(e){return e.join("||")}function t(t,i){var n=r(i);return(0,e.getFromMapOrThrow)(t.indexIdByName,n)}function i(r,t){return(0,e.isMaybeReadonlyArray)(t)?t.slice(0):[t]}function n(e){var r=e.indexes?e.indexes.slice(0):[];return e.properties._meta&&e.properties._meta.properties&&e.properties._meta.properties.lwt&&r.push(["_meta.lwt"]),r=r.map((r=>i(e,r)))}var o=exports.INDEXEDDB_DEFAULT_INDEX_SETITNGS={locale:null,unique:!1};function d(e,r){r.indexIds.forEach((r=>{e.createIndex(r,r,o)}))}function a(e,r,t,i){for(var n={i:t,d:i,i0:void 0,i1:void 0,i2:void 0,i3:void 0,i4:void 0,i5:void 0,i6:void 0,i7:void 0},o=0;o<e;++o){var d=(0,r[o])(i);n["i"+o]=d}return n}var s=exports.CLEANUP_INDEX=["_deleted","_meta.lwt"];exports.INDEX_NAME_CLEANUP=r(s);function x(t){var i={},n=t.indexes?t.indexes.map((e=>Array.isArray(e)?e.slice(0):[e])):[];n.push(s);var o=new Map;return n.forEach(((n,d)=>{var a="i"+d,s=r(n);if(o.has(s))throw new Error("duplicate index "+s);o.set(s,a),i[a]=(0,e.getIndexableStringMonad)(t,n)})),{indexIdByName:o,monadByIndexId:i}}