Object.defineProperty(exports,"__esModule",{value:!0});var e={RxStorageSQLite:!0,getRxStorageSQLite:!0};exports.RxStorageSQLite=void 0,exports.getRxStorageSQLite=u;var t=require("rxdb/plugins/core"),r=require("../../plugins/shared/version-check.js"),n=require("./sqlite-helpers.js");Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===n[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return n[t]}}))}));var a=require("./sqlite-storage-instance.js");Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===a[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return a[t]}}))}));var s=require("../shared/rxdb-premium-version.js"),o=require("./sqlite-types.js");Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===o[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return o[t]}}))}));var i=require("./sqlite-basics-helpers.js");Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===i[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return i[t]}}))}));var c=exports.RxStorageSQLite=function(){function e(e){this.name=n.RX_STORAGE_NAME_SQLITE,this.rxdbVersion=s.RXDB_PREMIUM_VERSION,this.settings=e}var o=e.prototype;return o.createStorageInstance=function(e){return(0,t.ensureRxStorageInstanceParamsAreCorrect)(e),(0,r.checkVersion)(),(0,a.createSQLiteStorageInstance)(this,e,this.settings)},o.base64AttachmentToStoredAttachmentsData=function(e){return this.settings.storeAttachmentsAsBase64String?e:Buffer.from(e,"base64")},o.storedAttachmentsDataToBase64=function(e){return"string"==typeof e?e:e instanceof Uint8Array?(0,t.arrayBufferToBase64)(e):e.toString("base64")},e}();function u(e){if(e.log){var r=0,n=r=>(0,t.ensureNotFalsy)(e.log)("## RxStorage SQLite log: "+r);e=(0,t.flatClone)(e);var a=(0,t.flatClone)(e.sqliteBasics),s=a.open;a.open=e=>{var t=r++;return n("open("+t+") "+e),s(e).then((e=>(n("open("+t+") DONE "),e))).catch((e=>{throw n("open("+t+") ERROR "),e}))};var o=a.all;a.all=(e,t)=>{var a=r++;return n("all("+a+") "+JSON.stringify(t)),o(e,t).then((e=>(n("all("+a+") DONE "),e))).catch((e=>{throw n("all("+a+") ERROR "),e}))};var i=a.run;a.run=(e,t)=>{var a=r++;return n("run("+a+") "+JSON.stringify(t)),i(e,t).then((e=>(n("run("+a+") DONE "),e))).catch((e=>{throw n("run("+a+") ERROR "),e}))};var u=a.setPragma;a.setPragma=(e,t,a)=>{var s=r++;return n("setPragma("+s+") "+JSON.stringify({key:t,value:a})),u(e,t,a).then((e=>(n("setPragma("+s+") DONE "),e))).catch((e=>{throw n("setPragma("+s+") ERROR "),e}))},e.sqliteBasics=a}return new c(e)}