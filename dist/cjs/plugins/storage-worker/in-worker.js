Object.defineProperty(exports,"__esModule",{value:!0}),exports.exposeWorkerRxStorage=r;var e=require("rxdb/plugins/utils"),s=require("rxdb/plugins/storage-remote"),o=require("rxjs");function r(r){var t;console.log("exposeWorkerRxStorage()");var a=new o.Subject;if("undefined"!=typeof self&&"object"==typeof self.onconnect){var n=new Map;self.onconnect=e=>{var s=e.ports[0];s.onmessage=e=>{var o=e.data;n.set(o.connectionId,s),a.next(o)}},t={storage:r.storage,messages$:a,send(s){(0,e.getFromMapOrThrow)(n,s.connectionId).postMessage(s)}}}else addEventListener("message",(e=>{var s=e.data;a.next(s)})),t={storage:r.storage,messages$:a,send(e){self.postMessage(e)}};(0,s.exposeRxStorageRemote)(t)}