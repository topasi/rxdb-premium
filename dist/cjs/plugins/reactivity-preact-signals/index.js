Object.defineProperty(exports,"__esModule",{value:!0}),exports.PreactSignalsRxReactivityFactory=exports.PREACT_SIGNAL_STATE=void 0;var e=require("@preact/signals-core"),i=exports.PREACT_SIGNAL_STATE={subscribeCount:0,signalBySubscription:new WeakMap,aliveSubscription:new Set};function r(e){i.aliveSubscription.has(e)&&(i.aliveSubscription.delete(e),i.signalBySubscription.delete(e),i.subscribeCount=i.subscribeCount-1,e.unsubscribe())}function s(e){r(e)}var t=new FinalizationRegistry(s);exports.PreactSignalsRxReactivityFactory={fromObservable(s,n){var a=(0,e.signal)(n),o=new WeakRef(a),u=s.subscribe((e=>{var s=i.signalBySubscription.get(u);s&&o.deref()?s.value=e:r(u)}));return i.aliveSubscription.add(u),i.signalBySubscription.set(u,a),i.subscribeCount=i.subscribeCount+1,t.register({},u),a}};