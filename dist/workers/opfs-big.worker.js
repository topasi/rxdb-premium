(()=>{var t={6894:(t,e,r)=>{var n=r(1924)("ArrayBuffer.prototype.byteLength",!0),o=r(635);t.exports=function(t){return o(t)?n?n(t):t.byteLength:NaN}},1924:(t,e,r)=>{var n=r(210),o=r(5559),i=o(n("String.prototype.indexOf"));t.exports=function(t,e){var r=n(t,!!e);return"function"==typeof r&&i(t,".prototype.")>-1?o(r):r}},5559:(t,e,r)=>{var n=r(8612),o=r(210),i=r(7771),a=r(4453),s=o("%Function.prototype.apply%"),c=o("%Function.prototype.call%"),u=o("%Reflect.apply%",!0)||n.call(c,s),l=r(4429),f=o("%Math.max%");t.exports=function(t){if("function"!=typeof t)throw new a("a function is required");var e=u(n,c,arguments);return i(e,1+f(0,t.length-(arguments.length-1)),!0)};var p=function(){return u(n,s,arguments)};l?l(t.exports,"apply",{value:p}):t.exports.apply=p},6313:t=>{var e=function(){function t(t,e){return null!=e&&t instanceof e}var e,r,n;try{e=Map}catch(t){e=function(){}}try{r=Set}catch(t){r=function(){}}try{n=Promise}catch(t){n=function(){}}function o(i,s,c,u,l){"object"==typeof s&&(c=s.depth,u=s.prototype,l=s.includeNonEnumerable,s=s.circular);var f=[],p=[],h="undefined"!=typeof Buffer;return void 0===s&&(s=!0),void 0===c&&(c=1/0),function i(c,y){if(null===c)return null;if(0===y)return c;var d,g;if("object"!=typeof c)return c;if(t(c,e))d=new e;else if(t(c,r))d=new r;else if(t(c,n))d=new n((function(t,e){c.then((function(e){t(i(e,y-1))}),(function(t){e(i(t,y-1))}))}));else if(o.__isArray(c))d=[];else if(o.__isRegExp(c))d=new RegExp(c.source,a(c)),c.lastIndex&&(d.lastIndex=c.lastIndex);else if(o.__isDate(c))d=new Date(c.getTime());else{if(h&&Buffer.isBuffer(c))return d=Buffer.allocUnsafe?Buffer.allocUnsafe(c.length):new Buffer(c.length),c.copy(d),d;t(c,Error)?d=Object.create(c):void 0===u?(g=Object.getPrototypeOf(c),d=Object.create(g)):(d=Object.create(u),g=u)}if(s){var v=f.indexOf(c);if(-1!=v)return p[v];f.push(c),p.push(d)}for(var m in t(c,e)&&c.forEach((function(t,e){var r=i(e,y-1),n=i(t,y-1);d.set(r,n)})),t(c,r)&&c.forEach((function(t){var e=i(t,y-1);d.add(e)})),c){var b;g&&(b=Object.getOwnPropertyDescriptor(g,m)),b&&null==b.set||(d[m]=i(c[m],y-1))}if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(c);for(m=0;m<w.length;m++){var S=w[m];(!(O=Object.getOwnPropertyDescriptor(c,S))||O.enumerable||l)&&(d[S]=i(c[S],y-1),O.enumerable||Object.defineProperty(d,S,{enumerable:!1}))}}if(l){var x=Object.getOwnPropertyNames(c);for(m=0;m<x.length;m++){var O,j=x[m];(O=Object.getOwnPropertyDescriptor(c,j))&&O.enumerable||(d[j]=i(c[j],y-1),Object.defineProperty(d,j,{enumerable:!1}))}}return d}(i,c)}function i(t){return Object.prototype.toString.call(t)}function a(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return o.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},o.__objToStr=i,o.__isDate=function(t){return"object"==typeof t&&"[object Date]"===i(t)},o.__isArray=function(t){return"object"==typeof t&&"[object Array]"===i(t)},o.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===i(t)},o.__getRegExpFlags=a,o}();t.exports&&(t.exports=e)},251:(t,e,r)=>{var n=r(3533),o=r(1924),i=r(2847),a=r(210),s=r(3216),c=r(7478),u=r(609),l=r(2584),f=r(5826),p=r(635),h=r(8923),y=r(8420),d=r(2579),g=r(2215),v=r(3679),m=r(1421),b=r(6430),w=r(6894),S=o("SharedArrayBuffer.prototype.byteLength",!0),x=o("Date.prototype.getTime"),O=Object.getPrototypeOf,j=o("Object.prototype.toString"),E=a("%Set%",!0),A=o("Map.prototype.has",!0),_=o("Map.prototype.get",!0),P=o("Map.prototype.size",!0),I=o("Set.prototype.add",!0),k=o("Set.prototype.delete",!0),R=o("Set.prototype.has",!0),$=o("Set.prototype.size",!0);function M(t,e,r,n){for(var o,i=s(t);(o=i.next())&&!o.done;)if(D(e,o.value,r,n))return k(t,o.value),!0;return!1}function T(t){return void 0===t?null:"object"!=typeof t?"symbol"!=typeof t&&("string"!=typeof t&&"number"!=typeof t||+t==+t):void 0}function N(t,e,r,o,i,a){var s=T(r);if(null!=s)return s;var c=_(e,s),u=n({},i,{strict:!1});return!(void 0===c&&!A(e,s)||!D(o,c,u,a))&&!A(t,s)&&D(o,c,u,a)}function F(t,e,r){var n=T(r);return null!=n?n:R(e,n)&&!R(t,n)}function B(t,e,r,n,o,i){for(var a,c,u=s(t);(a=u.next())&&!a.done;)if(D(r,c=a.value,o,i)&&D(n,_(e,c),o,i))return k(t,c),!0;return!1}function D(t,e,r,o){var a=r||{};if(a.strict?u(t,e):t===e)return!0;if(v(t)!==v(e))return!1;if(!t||!e||"object"!=typeof t&&"object"!=typeof e)return a.strict?u(t,e):t==e;var c,k=o.has(t),T=o.has(e);if(k&&T){if(o.get(t)===o.get(e))return!0}else c={};return k||o.set(t,c),T||o.set(e,c),function(t,e,r,o){var a,c;if(typeof t!=typeof e)return!1;if(null==t||null==e)return!1;if(j(t)!==j(e))return!1;if(l(t)!==l(e))return!1;if(f(t)!==f(e))return!1;var u=t instanceof Error,v=e instanceof Error;if(u!==v)return!1;if((u||v)&&(t.name!==e.name||t.message!==e.message))return!1;var k=y(t),T=y(e);if(k!==T)return!1;if((k||T)&&(t.source!==e.source||i(t)!==i(e)))return!1;var H=h(t),U=h(e);if(H!==U)return!1;if((H||U)&&x(t)!==x(e))return!1;if(r.strict&&O&&O(t)!==O(e))return!1;var L=b(t),W=b(e);if(L!==W)return!1;if(L||W){if(t.length!==e.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==e[a])return!1;return!0}var q=C(t),z=C(e);if(q!==z)return!1;if(q||z){if(t.length!==e.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==e[a])return!1;return!0}var K=p(t),V=p(e);if(K!==V)return!1;if(K||V)return w(t)===w(e)&&"function"==typeof Uint8Array&&D(new Uint8Array(t),new Uint8Array(e),r,o);var G=d(t),J=d(e);if(G!==J)return!1;if(G||J)return S(t)===S(e)&&"function"==typeof Uint8Array&&D(new Uint8Array(t),new Uint8Array(e),r,o);if(typeof t!=typeof e)return!1;var Q=g(t),Y=g(e);if(Q.length!==Y.length)return!1;for(Q.sort(),Y.sort(),a=Q.length-1;a>=0;a--)if(Q[a]!=Y[a])return!1;for(a=Q.length-1;a>=0;a--)if(!D(t[c=Q[a]],e[c],r,o))return!1;var X=m(t),Z=m(e);return X===Z&&("Set"===X||"Set"===Z?function(t,e,r,n){if($(t)!==$(e))return!1;for(var o,i,a,c=s(t),u=s(e);(o=c.next())&&!o.done;)if(o.value&&"object"==typeof o.value)a||(a=new E),I(a,o.value);else if(!R(e,o.value)){if(r.strict)return!1;if(!F(t,e,o.value))return!1;a||(a=new E),I(a,o.value)}if(a){for(;(i=u.next())&&!i.done;)if(i.value&&"object"==typeof i.value){if(!M(a,i.value,r.strict,n))return!1}else if(!r.strict&&!R(t,i.value)&&!M(a,i.value,r.strict,n))return!1;return 0===$(a)}return!0}(t,e,r,o):"Map"!==X||function(t,e,r,o){if(P(t)!==P(e))return!1;for(var i,a,c,u,l,f,p=s(t),h=s(e);(i=p.next())&&!i.done;)if(u=i.value[0],l=i.value[1],u&&"object"==typeof u)c||(c=new E),I(c,u);else if(void 0===(f=_(e,u))&&!A(e,u)||!D(l,f,r,o)){if(r.strict)return!1;if(!N(t,e,u,l,r,o))return!1;c||(c=new E),I(c,u)}if(c){for(;(a=h.next())&&!a.done;)if(u=a.value[0],f=a.value[1],u&&"object"==typeof u){if(!B(c,t,u,f,r,o))return!1}else if(!(r.strict||t.has(u)&&D(_(t,u),f,r,o)||B(c,t,u,f,n({},r,{strict:!1}),o)))return!1;return 0===$(c)}return!0}(t,e,r,o))}(t,e,a,o)}function C(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0]||!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t)))}t.exports=function(t,e,r){return D(t,e,r,c())}},2296:(t,e,r)=>{var n=r(4429),o=r(3464),i=r(4453),a=r(7296);t.exports=function(t,e,r){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new i("`obj` must be an object or a function`");if("string"!=typeof e&&"symbol"!=typeof e)throw new i("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new i("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new i("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new i("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new i("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],f=!!a&&a(t,e);if(n)n(t,e,{configurable:null===u&&f?f.configurable:!u,enumerable:null===s&&f?f.enumerable:!s,value:r,writable:null===c&&f?f.writable:!c});else{if(!l&&(s||c||u))throw new o("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");t[e]=r}}},4289:(t,e,r)=>{var n=r(2215),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,a=Array.prototype.concat,s=r(2296),c=r(1044)(),u=function(t,e,r,n){if(e in t)if(!0===n){if(t[e]===r)return}else if("function"!=typeof(o=n)||"[object Function]"!==i.call(o)||!n())return;var o;c?s(t,e,r,!0):s(t,e,r)},l=function(t,e){var r=arguments.length>2?arguments[2]:{},i=n(e);o&&(i=a.call(i,Object.getOwnPropertySymbols(e)));for(var s=0;s<i.length;s+=1)u(t,i[s],e[i[s]],r[i[s]])};l.supportsDescriptors=!!c,t.exports=l},4429:(t,e,r)=>{var n=r(210)("%Object.defineProperty%",!0)||!1;if(n)try{n({},"a",{value:1})}catch(t){n=!1}t.exports=n},3981:t=>{t.exports=EvalError},1648:t=>{t.exports=Error},4726:t=>{t.exports=RangeError},6712:t=>{t.exports=ReferenceError},3464:t=>{t.exports=SyntaxError},4453:t=>{t.exports=TypeError},3915:t=>{t.exports=URIError},4029:(t,e,r)=>{var n=r(5320),o=Object.prototype.toString,i=Object.prototype.hasOwnProperty;t.exports=function(t,e,r){if(!n(e))throw new TypeError("iterator must be a function");var a;arguments.length>=3&&(a=r),"[object Array]"===o.call(t)?function(t,e,r){for(var n=0,o=t.length;n<o;n++)i.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))}(t,e,a):"string"==typeof t?function(t,e,r){for(var n=0,o=t.length;n<o;n++)null==r?e(t.charAt(n),n,t):e.call(r,t.charAt(n),n,t)}(t,e,a):function(t,e,r){for(var n in t)i.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))}(t,e,a)}},7648:t=>{var e=Object.prototype.toString,r=Math.max,n=function(t,e){for(var r=[],n=0;n<t.length;n+=1)r[n]=t[n];for(var o=0;o<e.length;o+=1)r[o+t.length]=e[o];return r};t.exports=function(t){var o=this;if("function"!=typeof o||"[object Function]"!==e.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var i,a=function(t,e){for(var r=[],n=1||0,o=0;n<t.length;n+=1,o+=1)r[o]=t[n];return r}(arguments),s=r(0,o.length-a.length),c=[],u=0;u<s;u++)c[u]="$"+u;if(i=Function("binder","return function ("+function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r}(c,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var e=o.apply(this,n(a,arguments));return Object(e)===e?e:this}return o.apply(t,n(a,arguments))})),o.prototype){var l=function(){};l.prototype=o.prototype,i.prototype=new l,l.prototype=null}return i}},8612:(t,e,r)=>{var n=r(7648);t.exports=Function.prototype.bind||n},5972:t=>{var e=function(){return"string"==typeof function(){}.name},r=Object.getOwnPropertyDescriptor;if(r)try{r([],"length")}catch(t){r=null}e.functionsHaveConfigurableNames=function(){if(!e()||!r)return!1;var t=r((function(){}),"name");return!!t&&!!t.configurable};var n=Function.prototype.bind;e.boundFunctionsHaveNames=function(){return e()&&"function"==typeof n&&""!==function(){}.bind().name},t.exports=e},210:(t,e,r)=>{var n,o=r(1648),i=r(3981),a=r(4726),s=r(6712),c=r(3464),u=r(4453),l=r(3915),f=Function,p=function(t){try{return f('"use strict"; return ('+t+").constructor;")()}catch(t){}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch(t){h=null}var y=function(){throw new u},d=h?function(){try{return y}catch(t){try{return h(arguments,"callee").get}catch(t){return y}}}():y,g=r(1405)(),v=r(8185)(),m=Object.getPrototypeOf||(v?function(t){return t.__proto__}:null),b={},w="undefined"!=typeof Uint8Array&&m?m(Uint8Array):n,S={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":g&&m?m([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":i,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":f,"%GeneratorFunction%":b,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&m?m(m([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&g&&m?m((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":a,"%ReferenceError%":s,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&g&&m?m((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&m?m(""[Symbol.iterator]()):n,"%Symbol%":g?Symbol:n,"%SyntaxError%":c,"%ThrowTypeError%":d,"%TypedArray%":w,"%TypeError%":u,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":l,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet};if(m)try{null.error}catch(t){var x=m(m(t));S["%Error.prototype%"]=x}var O=function t(e){var r;if("%AsyncFunction%"===e)r=p("async function () {}");else if("%GeneratorFunction%"===e)r=p("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=p("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&m&&(r=m(o.prototype))}return S[e]=r,r},j={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},E=r(8612),A=r(8824),_=E.call(Function.call,Array.prototype.concat),P=E.call(Function.apply,Array.prototype.splice),I=E.call(Function.call,String.prototype.replace),k=E.call(Function.call,String.prototype.slice),R=E.call(Function.call,RegExp.prototype.exec),$=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,M=/\\(\\)?/g,T=function(t,e){var r,n=t;if(A(j,n)&&(n="%"+(r=j[n])[0]+"%"),A(S,n)){var o=S[n];if(o===b&&(o=O(n)),void 0===o&&!e)throw new u("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new c("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new u('"allowMissing" argument must be a boolean');if(null===R(/^%?[^%]*%?$/,t))throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(t){var e=k(t,0,1),r=k(t,-1);if("%"===e&&"%"!==r)throw new c("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new c("invalid intrinsic syntax, expected opening `%`");var n=[];return I(t,$,(function(t,e,r,o){n[n.length]=r?I(o,M,"$1"):e||t})),n}(t),n=r.length>0?r[0]:"",o=T("%"+n+"%",e),i=o.name,a=o.value,s=!1,l=o.alias;l&&(n=l[0],P(r,_([0,1],l)));for(var f=1,p=!0;f<r.length;f+=1){var y=r[f],d=k(y,0,1),g=k(y,-1);if(('"'===d||"'"===d||"`"===d||'"'===g||"'"===g||"`"===g)&&d!==g)throw new c("property names with quotes must have matching quotes");if("constructor"!==y&&p||(s=!0),A(S,i="%"+(n+="."+y)+"%"))a=S[i];else if(null!=a){if(!(y in a)){if(!e)throw new u("base intrinsic for "+t+" exists, but the property is not available.");return}if(h&&f+1>=r.length){var v=h(a,y);a=(p=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:a[y]}else p=A(a,y),a=a[y];p&&!s&&(S[i]=a)}}return a}},7296:(t,e,r)=>{var n=r(210)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(t){n=null}t.exports=n},932:t=>{var e="undefined"!=typeof BigInt&&BigInt;t.exports=function(){return"function"==typeof e&&"function"==typeof BigInt&&"bigint"==typeof e(42)&&"bigint"==typeof BigInt(42)}},1044:(t,e,r)=>{var n=r(4429),o=function(){return!!n};o.hasArrayLengthDefineBug=function(){if(!n)return null;try{return 1!==n([],"length",{value:1}).length}catch(t){return!0}},t.exports=o},8185:t=>{var e={__proto__:null,foo:{}},r=Object;t.exports=function(){return{__proto__:e}.foo===e.foo&&!(e instanceof r)}},1405:(t,e,r)=>{var n="undefined"!=typeof Symbol&&Symbol,o=r(5419);t.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&o()}},5419:t=>{t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},6410:(t,e,r)=>{var n=r(5419);t.exports=function(){return n()&&!!Symbol.toStringTag}},8824:(t,e,r)=>{var n=Function.prototype.call,o=Object.prototype.hasOwnProperty,i=r(8612);t.exports=i.call(n,o)},9496:(t,e,r)=>{var n=r(8824),o=r(7478)(),i=r(4453),a={assert:function(t,e){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new i("`O` is not an object");if("string"!=typeof e)throw new i("`slot` must be a string");if(o.assert(t),!a.has(t,e))throw new i("`"+e+"` is not present on `O`")},get:function(t,e){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new i("`O` is not an object");if("string"!=typeof e)throw new i("`slot` must be a string");var r=o.get(t);return r&&r["$"+e]},has:function(t,e){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new i("`O` is not an object");if("string"!=typeof e)throw new i("`slot` must be a string");var r=o.get(t);return!!r&&n(r,"$"+e)},set:function(t,e,r){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new i("`O` is not an object");if("string"!=typeof e)throw new i("`slot` must be a string");var n=o.get(t);n||(n={},o.set(t,n)),n["$"+e]=r}};Object.freeze&&Object.freeze(a),t.exports=a},2584:(t,e,r)=>{var n=r(6410)(),o=r(1924)("Object.prototype.toString"),i=function(t){return!(n&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===o(t)},a=function(t){return!!i(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==o(t)&&"[object Function]"===o(t.callee)},s=function(){return i(arguments)}();i.isLegacyArguments=a,t.exports=s?i:a},635:(t,e,r)=>{var n=r(5559),o=r(1924),i=r(210)("%ArrayBuffer%",!0),a=o("ArrayBuffer.prototype.byteLength",!0),s=o("Object.prototype.toString"),c=!!i&&!a&&new i(0).slice,u=!!c&&n(c);t.exports=a||u?function(t){if(!t||"object"!=typeof t)return!1;try{return a?a(t):u(t,0),!0}catch(t){return!1}}:i?function(t){return"[object ArrayBuffer]"===s(t)}:function(t){return!1}},3376:(t,e,r)=>{if(r(932)()){var n=BigInt.prototype.valueOf;t.exports=function(t){return null!=t&&"boolean"!=typeof t&&"string"!=typeof t&&"number"!=typeof t&&"symbol"!=typeof t&&"function"!=typeof t&&("bigint"==typeof t||function(t){try{return n.call(t),!0}catch(t){}return!1}(t))}}else t.exports=function(t){return!1}},6814:(t,e,r)=>{var n=r(1924),o=n("Boolean.prototype.toString"),i=n("Object.prototype.toString"),a=r(6410)();t.exports=function(t){return"boolean"==typeof t||null!==t&&"object"==typeof t&&(a&&Symbol.toStringTag in t?function(t){try{return o(t),!0}catch(t){return!1}}(t):"[object Boolean]"===i(t))}},5320:t=>{var e,r,n=Function.prototype.toString,o="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof o&&"function"==typeof Object.defineProperty)try{e=Object.defineProperty({},"length",{get:function(){throw r}}),r={},o((function(){throw 42}),null,e)}catch(t){t!==r&&(o=null)}else o=null;var i=/^\s*class\b/,a=function(t){try{var e=n.call(t);return i.test(e)}catch(t){return!1}},s=function(t){try{return!a(t)&&(n.call(t),!0)}catch(t){return!1}},c=Object.prototype.toString,u="function"==typeof Symbol&&!!Symbol.toStringTag,l=!(0 in[,]),f=function(){return!1};if("object"==typeof document){var p=document.all;c.call(p)===c.call(document.all)&&(f=function(t){if((l||!t)&&(void 0===t||"object"==typeof t))try{var e=c.call(t);return("[object HTMLAllCollection]"===e||"[object HTML document.all class]"===e||"[object HTMLCollection]"===e||"[object Object]"===e)&&null==t("")}catch(t){}return!1})}t.exports=o?function(t){if(f(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;try{o(t,null,e)}catch(t){if(t!==r)return!1}return!a(t)&&s(t)}:function(t){if(f(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(u)return s(t);if(a(t))return!1;var e=c.call(t);return!("[object Function]"!==e&&"[object GeneratorFunction]"!==e&&!/^\[object HTML/.test(e))&&s(t)}},8923:(t,e,r)=>{var n=Date.prototype.getDay,o=Object.prototype.toString,i=r(6410)();t.exports=function(t){return"object"==typeof t&&null!==t&&(i?function(t){try{return n.call(t),!0}catch(t){return!1}}(t):"[object Date]"===o.call(t))}},8379:t=>{var e,r="function"==typeof Map&&Map.prototype?Map:null,n="function"==typeof Set&&Set.prototype?Set:null;r||(e=function(t){return!1});var o=r?Map.prototype.has:null,i=n?Set.prototype.has:null;e||o||(e=function(t){return!1}),t.exports=e||function(t){if(!t||"object"!=typeof t)return!1;try{if(o.call(t),i)try{i.call(t)}catch(t){return!0}return t instanceof r}catch(t){}return!1}},6450:(t,e)=>{t.exports=!("undefined"==typeof process||!process.versions||!process.versions.node)},4578:(t,e,r)=>{var n=Number.prototype.toString,o=Object.prototype.toString,i=r(6410)();t.exports=function(t){return"number"==typeof t||"object"==typeof t&&(i?function(t){try{return n.call(t),!0}catch(t){return!1}}(t):"[object Number]"===o.call(t))}},8420:(t,e,r)=>{var n,o,i,a,s=r(1924),c=r(6410)();if(c){n=s("Object.prototype.hasOwnProperty"),o=s("RegExp.prototype.exec"),i={};var u=function(){throw i};a={toString:u,valueOf:u},"symbol"==typeof Symbol.toPrimitive&&(a[Symbol.toPrimitive]=u)}var l=s("Object.prototype.toString"),f=Object.getOwnPropertyDescriptor;t.exports=c?function(t){if(!t||"object"!=typeof t)return!1;var e=f(t,"lastIndex");if(!e||!n(e,"value"))return!1;try{o(t,a)}catch(t){return t===i}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===l(t)}},9572:t=>{var e,r="function"==typeof Map&&Map.prototype?Map:null,n="function"==typeof Set&&Set.prototype?Set:null;n||(e=function(t){return!1});var o=r?Map.prototype.has:null,i=n?Set.prototype.has:null;e||i||(e=function(t){return!1}),t.exports=e||function(t){if(!t||"object"!=typeof t)return!1;try{if(i.call(t),o)try{o.call(t)}catch(t){return!0}return t instanceof n}catch(t){}return!1}},2579:(t,e,r)=>{var n=r(1924)("SharedArrayBuffer.prototype.byteLength",!0);t.exports=n?function(t){if(!t||"object"!=typeof t)return!1;try{return n(t),!0}catch(t){return!1}}:function(t){return!1}},9981:(t,e,r)=>{var n=String.prototype.valueOf,o=Object.prototype.toString,i=r(6410)();t.exports=function(t){return"string"==typeof t||"object"==typeof t&&(i?function(t){try{return n.call(t),!0}catch(t){return!1}}(t):"[object String]"===o.call(t))}},2636:(t,e,r)=>{var n=Object.prototype.toString;if(r(1405)()){var o=Symbol.prototype.toString,i=/^Symbol\(.*\)$/;t.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==n.call(t))return!1;try{return function(t){return"symbol"==typeof t.valueOf()&&i.test(o.call(t))}(t)}catch(t){return!1}}}else t.exports=function(t){return!1}},1718:t=>{var e,r="function"==typeof WeakMap&&WeakMap.prototype?WeakMap:null,n="function"==typeof WeakSet&&WeakSet.prototype?WeakSet:null;r||(e=function(t){return!1});var o=r?r.prototype.has:null,i=n?n.prototype.has:null;e||o||(e=function(t){return!1}),t.exports=e||function(t){if(!t||"object"!=typeof t)return!1;try{if(o.call(t,o),i)try{i.call(t,i)}catch(t){return!0}return t instanceof r}catch(t){}return!1}},5899:(t,e,r)=>{var n=r(210),o=r(1924),i=n("%WeakSet%",!0),a=o("WeakSet.prototype.has",!0);if(a){var s=o("WeakMap.prototype.has",!0);t.exports=function(t){if(!t||"object"!=typeof t)return!1;try{if(a(t,a),s)try{s(t,s)}catch(t){return!0}return t instanceof i}catch(t){}return!1}}else t.exports=function(t){return!1}},5826:t=>{var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},631:(t,e,r)=>{var n="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=n&&o&&"function"==typeof o.get?o.get:null,a=n&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=s&&c&&"function"==typeof c.get?c.get:null,l=s&&Set.prototype.forEach,f="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,p="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,h="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,y=Boolean.prototype.valueOf,d=Object.prototype.toString,g=Function.prototype.toString,v=String.prototype.match,m=String.prototype.slice,b=String.prototype.replace,w=String.prototype.toUpperCase,S=String.prototype.toLowerCase,x=RegExp.prototype.test,O=Array.prototype.concat,j=Array.prototype.join,E=Array.prototype.slice,A=Math.floor,_="function"==typeof BigInt?BigInt.prototype.valueOf:null,P=Object.getOwnPropertySymbols,I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,k="function"==typeof Symbol&&"object"==typeof Symbol.iterator,R="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,$=Object.prototype.propertyIsEnumerable,M=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function T(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||x.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var n=t<0?-A(-t):A(t);if(n!==t){var o=String(n),i=m.call(e,o.length+1);return b.call(o,r,"$&_")+"."+b.call(b.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(e,r,"$&_")}var N=r(4654),F=N.custom,B=L(F)?F:null;function D(t,e,r){var n="double"===(r.quoteStyle||e)?'"':"'";return n+t+n}function C(t){return b.call(String(t),/"/g,"&quot;")}function H(t){return!("[object Array]"!==z(t)||R&&"object"==typeof t&&R in t)}function U(t){return!("[object RegExp]"!==z(t)||R&&"object"==typeof t&&R in t)}function L(t){if(k)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!I)return!1;try{return I.call(t),!0}catch(t){}return!1}t.exports=function t(e,n,o,s){var c=n||{};if(q(c,"quoteStyle")&&"single"!==c.quoteStyle&&"double"!==c.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(q(c,"maxStringLength")&&("number"==typeof c.maxStringLength?c.maxStringLength<0&&c.maxStringLength!==1/0:null!==c.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var d=!q(c,"customInspect")||c.customInspect;if("boolean"!=typeof d&&"symbol"!==d)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(q(c,"indent")&&null!==c.indent&&"\t"!==c.indent&&!(parseInt(c.indent,10)===c.indent&&c.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(q(c,"numericSeparator")&&"boolean"!=typeof c.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var w=c.numericSeparator;if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return V(e,c);if("number"==typeof e){if(0===e)return 1/0/e>0?"0":"-0";var x=String(e);return w?T(e,x):x}if("bigint"==typeof e){var A=String(e)+"n";return w?T(e,A):A}var P=void 0===c.depth?5:c.depth;if(void 0===o&&(o=0),o>=P&&P>0&&"object"==typeof e)return H(e)?"[Array]":"[Object]";var F=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;r=j.call(Array(t.indent+1)," ")}return{base:r,prev:j.call(Array(e+1),r)}}(c,o);if(void 0===s)s=[];else if(K(s,e)>=0)return"[Circular]";function W(e,r,n){if(r&&(s=E.call(s)).push(r),n){var i={depth:c.depth};return q(c,"quoteStyle")&&(i.quoteStyle=c.quoteStyle),t(e,i,o+1,s)}return t(e,c,o+1,s)}if("function"==typeof e&&!U(e)){var G=function(t){if(t.name)return t.name;var e=v.call(g.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}(e),tt=Z(e,W);return"[Function"+(G?": "+G:" (anonymous)")+"]"+(tt.length>0?" { "+j.call(tt,", ")+" }":"")}if(L(e)){var et=k?b.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):I.call(e);return"object"!=typeof e||k?et:J(et)}if(function(t){return!(!t||"object"!=typeof t)&&("undefined"!=typeof HTMLElement&&t instanceof HTMLElement||"string"==typeof t.nodeName&&"function"==typeof t.getAttribute)}(e)){for(var rt="<"+S.call(String(e.nodeName)),nt=e.attributes||[],ot=0;ot<nt.length;ot++)rt+=" "+nt[ot].name+"="+D(C(nt[ot].value),"double",c);return rt+=">",e.childNodes&&e.childNodes.length&&(rt+="..."),rt+"</"+S.call(String(e.nodeName))+">"}if(H(e)){if(0===e.length)return"[]";var it=Z(e,W);return F&&!function(t){for(var e=0;e<t.length;e++)if(K(t[e],"\n")>=0)return!1;return!0}(it)?"["+X(it,F)+"]":"[ "+j.call(it,", ")+" ]"}if(function(t){return!("[object Error]"!==z(t)||R&&"object"==typeof t&&R in t)}(e)){var at=Z(e,W);return"cause"in Error.prototype||!("cause"in e)||$.call(e,"cause")?0===at.length?"["+String(e)+"]":"{ ["+String(e)+"] "+j.call(at,", ")+" }":"{ ["+String(e)+"] "+j.call(O.call("[cause]: "+W(e.cause),at),", ")+" }"}if("object"==typeof e&&d){if(B&&"function"==typeof e[B]&&N)return N(e,{depth:P-o});if("symbol"!==d&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!i||!t||"object"!=typeof t)return!1;try{i.call(t);try{u.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var st=[];return a&&a.call(e,(function(t,r){st.push(W(r,e,!0)+" => "+W(t,e))})),Y("Map",i.call(e),st,F)}if(function(t){if(!u||!t||"object"!=typeof t)return!1;try{u.call(t);try{i.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var ct=[];return l&&l.call(e,(function(t){ct.push(W(t,e))})),Y("Set",u.call(e),ct,F)}if(function(t){if(!f||!t||"object"!=typeof t)return!1;try{f.call(t,f);try{p.call(t,p)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return Q("WeakMap");if(function(t){if(!p||!t||"object"!=typeof t)return!1;try{p.call(t,p);try{f.call(t,f)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return Q("WeakSet");if(function(t){if(!h||!t||"object"!=typeof t)return!1;try{return h.call(t),!0}catch(t){}return!1}(e))return Q("WeakRef");if(function(t){return!("[object Number]"!==z(t)||R&&"object"==typeof t&&R in t)}(e))return J(W(Number(e)));if(function(t){if(!t||"object"!=typeof t||!_)return!1;try{return _.call(t),!0}catch(t){}return!1}(e))return J(W(_.call(e)));if(function(t){return!("[object Boolean]"!==z(t)||R&&"object"==typeof t&&R in t)}(e))return J(y.call(e));if(function(t){return!("[object String]"!==z(t)||R&&"object"==typeof t&&R in t)}(e))return J(W(String(e)));if("undefined"!=typeof window&&e===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&e===globalThis||void 0!==r.g&&e===r.g)return"{ [object globalThis] }";if(!function(t){return!("[object Date]"!==z(t)||R&&"object"==typeof t&&R in t)}(e)&&!U(e)){var ut=Z(e,W),lt=M?M(e)===Object.prototype:e instanceof Object||e.constructor===Object,ft=e instanceof Object?"":"null prototype",pt=!lt&&R&&Object(e)===e&&R in e?m.call(z(e),8,-1):ft?"Object":"",ht=(lt||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(pt||ft?"["+j.call(O.call([],pt||[],ft||[]),": ")+"] ":"");return 0===ut.length?ht+"{}":F?ht+"{"+X(ut,F)+"}":ht+"{ "+j.call(ut,", ")+" }"}return String(e)};var W=Object.prototype.hasOwnProperty||function(t){return t in this};function q(t,e){return W.call(t,e)}function z(t){return d.call(t)}function K(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function V(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return V(m.call(t,0,e.maxStringLength),e)+n}return D(b.call(b.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,G),"single",e)}function G(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+w.call(e.toString(16))}function J(t){return"Object("+t+")"}function Q(t){return t+" { ? }"}function Y(t,e,r,n){return t+" ("+e+") {"+(n?X(r,n):j.call(r,", "))+"}"}function X(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+j.call(t,","+r)+"\n"+e.prev}function Z(t,e){var r=H(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=q(t,o)?e(t[o],t):""}var i,a="function"==typeof P?P(t):[];if(k){i={};for(var s=0;s<a.length;s++)i["$"+a[s]]=a[s]}for(var c in t)q(t,c)&&(r&&String(Number(c))===c&&c<t.length||k&&i["$"+c]instanceof Symbol||(x.call(/[^\w$]/,c)?n.push(e(c,t)+": "+e(t[c],t)):n.push(c+": "+e(t[c],t))));if("function"==typeof P)for(var u=0;u<a.length;u++)$.call(t,a[u])&&n.push("["+e(a[u])+"]: "+e(t[a[u]],t));return n}},4244:t=>{var e=function(t){return t!=t};t.exports=function(t,r){return 0===t&&0===r?1/t==1/r:t===r||!(!e(t)||!e(r))}},609:(t,e,r)=>{var n=r(4289),o=r(5559),i=r(4244),a=r(5624),s=r(2281),c=o(a(),Object);n(c,{getPolyfill:a,implementation:i,shim:s}),t.exports=c},5624:(t,e,r)=>{var n=r(4244);t.exports=function(){return"function"==typeof Object.is?Object.is:n}},2281:(t,e,r)=>{var n=r(5624),o=r(4289);t.exports=function(){var t=n();return o(Object,{is:t},{is:function(){return Object.is!==t}}),t}},8987:(t,e,r)=>{var n;if(!Object.keys){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=r(1414),s=Object.prototype.propertyIsEnumerable,c=!s.call({toString:null},"toString"),u=s.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(t){var e=t.constructor;return e&&e.prototype===t},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!p["$"+t]&&o.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{f(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();n=function(t){var e=null!==t&&"object"==typeof t,r="[object Function]"===i.call(t),n=a(t),s=e&&"[object String]"===i.call(t),p=[];if(!e&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var y=u&&r;if(s&&t.length>0&&!o.call(t,0))for(var d=0;d<t.length;++d)p.push(String(d));if(n&&t.length>0)for(var g=0;g<t.length;++g)p.push(String(g));else for(var v in t)y&&"prototype"===v||!o.call(t,v)||p.push(String(v));if(c)for(var m=function(t){if("undefined"==typeof window||!h)return f(t);try{return f(t)}catch(t){return!1}}(t),b=0;b<l.length;++b)m&&"constructor"===l[b]||!o.call(t,l[b])||p.push(l[b]);return p}}t.exports=n},2215:(t,e,r)=>{var n=Array.prototype.slice,o=r(1414),i=Object.keys,a=i?function(t){return i(t)}:r(8987),s=Object.keys;a.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return o(t)?s(n.call(t)):s(t)})}else Object.keys=a;return Object.keys||a},t.exports=a},1414:t=>{var e=Object.prototype.toString;t.exports=function(t){var r=e.call(t),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),n}},2837:(t,e,r)=>{var n=r(2215),o=r(5419)(),i=r(1924),a=Object,s=i("Array.prototype.push"),c=i("Object.prototype.propertyIsEnumerable"),u=o?Object.getOwnPropertySymbols:null;t.exports=function(t,e){if(null==t)throw new TypeError("target must be an object");var r=a(t);if(1===arguments.length)return r;for(var i=1;i<arguments.length;++i){var l=a(arguments[i]),f=n(l),p=o&&(Object.getOwnPropertySymbols||u);if(p)for(var h=p(l),y=0;y<h.length;++y){var d=h[y];c(l,d)&&s(f,d)}for(var g=0;g<f.length;++g){var v=f[g];if(c(l,v)){var m=l[v];r[v]=m}}}return r}},3533:(t,e,r)=>{var n=r(4289),o=r(5559),i=r(2837),a=r(8162),s=r(4489),c=o.apply(a()),u=function(t,e){return c(Object,arguments)};n(u,{getPolyfill:a,implementation:i,shim:s}),t.exports=u},8162:(t,e,r)=>{var n=r(2837);t.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var o=Object.assign({},r),i="";for(var a in o)i+=a;return t!==i}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}return!1}()?n:Object.assign:n}},4489:(t,e,r)=>{var n=r(4289),o=r(8162);t.exports=function(){var t=o();return n(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t}},9908:t=>{t.exports=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},3697:(t,e,r)=>{var n=r(8052),o=r(4453),i=Object;t.exports=n((function(){if(null==this||this!==i(this))throw new o("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t}),"get flags",!0)},2847:(t,e,r)=>{var n=r(4289),o=r(5559),i=r(3697),a=r(1721),s=r(2753),c=o(a());n(c,{getPolyfill:a,implementation:i,shim:s}),t.exports=c},1721:(t,e,r)=>{var n=r(3697),o=r(4289).supportsDescriptors,i=Object.getOwnPropertyDescriptor;t.exports=function(){if(o&&"gim"===/a/gim.flags){var t=i(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var e="",r={};if(Object.defineProperty(r,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(r,"sticky",{get:function(){e+="y"}}),"dy"===e)return t.get}}return n}},2753:(t,e,r)=>{var n=r(4289).supportsDescriptors,o=r(1721),i=Object.getOwnPropertyDescriptor,a=Object.defineProperty,s=TypeError,c=Object.getPrototypeOf,u=/a/;t.exports=function(){if(!n||!c)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=o(),e=c(u),r=i(e,"flags");return r&&r.get===t||a(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},7771:(t,e,r)=>{var n=r(210),o=r(2296),i=r(1044)(),a=r(7296),s=r(4453),c=n("%Math.floor%");t.exports=function(t,e){if("function"!=typeof t)throw new s("`fn` is not a function");if("number"!=typeof e||e<0||e>4294967295||c(e)!==e)throw new s("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,u=!0;if("length"in t&&a){var l=a(t,"length");l&&!l.configurable&&(n=!1),l&&!l.writable&&(u=!1)}return(n||u||!r)&&(i?o(t,"length",e,!0,!0):o(t,"length",e)),t}},8052:(t,e,r)=>{var n=r(2296),o=r(1044)(),i=r(5972).functionsHaveConfigurableNames(),a=r(4453);t.exports=function(t,e){if("function"!=typeof t)throw new a("`fn` is not a function");return arguments.length>2&&!!arguments[2]&&!i||(o?n(t,"name",e,!0,!0):n(t,"name",e)),t}},7478:(t,e,r)=>{var n=r(210),o=r(1924),i=r(631),a=r(4453),s=n("%WeakMap%",!0),c=n("%Map%",!0),u=o("WeakMap.prototype.get",!0),l=o("WeakMap.prototype.set",!0),f=o("WeakMap.prototype.has",!0),p=o("Map.prototype.get",!0),h=o("Map.prototype.set",!0),y=o("Map.prototype.has",!0),d=function(t,e){for(var r,n=t;null!==(r=n.next);n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r};t.exports=function(){var t,e,r,n={assert:function(t){if(!n.has(t))throw new a("Side channel does not contain "+i(t))},get:function(n){if(s&&n&&("object"==typeof n||"function"==typeof n)){if(t)return u(t,n)}else if(c){if(e)return p(e,n)}else if(r)return function(t,e){var r=d(t,e);return r&&r.value}(r,n)},has:function(n){if(s&&n&&("object"==typeof n||"function"==typeof n)){if(t)return f(t,n)}else if(c){if(e)return y(e,n)}else if(r)return function(t,e){return!!d(t,e)}(r,n);return!1},set:function(n,o){s&&n&&("object"==typeof n||"function"==typeof n)?(t||(t=new s),l(t,n,o)):c?(e||(e=new c),h(e,n,o)):(r||(r={key:{},next:null}),function(t,e,r){var n=d(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}}(r,n,o))}};return n}},6373:(t,e,r)=>{var n=r(9496),o=SyntaxError,i="object"==typeof StopIteration?StopIteration:null;t.exports=function(t){if(!i)throw new o("this environment lacks StopIteration");n.set(t,"[[Done]]",!1);var e={next:function(){var t=n.get(this,"[[Iterator]]"),e=n.get(t,"[[Done]]");try{return{done:e,value:e?void 0:t.next()}}catch(e){if(n.set(t,"[[Done]]",!0),e!==i)throw e;return{done:!0,value:void 0}}}};return n.set(e,"[[Iterator]]",t),e}},3679:(t,e,r)=>{var n=r(9981),o=r(4578),i=r(6814),a=r(2636),s=r(3376);t.exports=function(t){return null==t||"object"!=typeof t&&"function"!=typeof t?null:n(t)?"String":o(t)?"Number":i(t)?"Boolean":a(t)?"Symbol":s(t)?"BigInt":void 0}},1421:(t,e,r)=>{var n=r(8379),o=r(9572),i=r(1718),a=r(5899);t.exports=function(t){if(t&&"object"==typeof t){if(n(t))return"Map";if(o(t))return"Set";if(i(t))return"WeakMap";if(a(t))return"WeakSet"}return!1}},6430:(t,e,r)=>{var n=r(4029),o=r(3083),i=r(5559),a=r(1924),s=r(7296),c=a("Object.prototype.toString"),u=r(6410)(),l="undefined"==typeof globalThis?r.g:globalThis,f=o(),p=a("String.prototype.slice"),h=Object.getPrototypeOf,y=a("Array.prototype.indexOf",!0)||function(t,e){for(var r=0;r<t.length;r+=1)if(t[r]===e)return r;return-1},d={__proto__:null};n(f,u&&s&&h?function(t){var e=new l[t];if(Symbol.toStringTag in e){var r=h(e),n=s(r,Symbol.toStringTag);if(!n){var o=h(r);n=s(o,Symbol.toStringTag)}d["$"+t]=i(n.get)}}:function(t){var e=new l[t],r=e.slice||e.set;r&&(d["$"+t]=i(r))}),t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!u){var e=p(c(t),8,-1);return y(f,e)>-1?e:"Object"===e&&function(t){var e=!1;return n(d,(function(r,n){if(!e)try{r(t),e=p(n,1)}catch(t){}})),e}(t)}return s?function(t){var e=!1;return n(d,(function(r,n){if(!e)try{"$"+r(t)===n&&(e=p(n,1))}catch(t){}})),e}(t):null}},8507:()=>{},4654:()=>{},3083:(t,e,r)=>{var n=r(9908),o="undefined"==typeof globalThis?r.g:globalThis;t.exports=function(){for(var t=[],e=0;e<n.length;e++)"function"==typeof o[n[e]]&&(t[t.length]=n[e]);return t}},3216:(t,e,r)=>{var n=r(2584),o=r(6373);if(r(1405)()||r(5419)()){var i=Symbol.iterator;t.exports=function(t){return null!=t&&void 0!==t[i]?t[i]():n(t)?Array.prototype[i].call(t):void 0}}else{var a=r(5826),s=r(9981),c=r(210),u=c("%Map%",!0),l=c("%Set%",!0),f=r(1924),p=f("Array.prototype.push"),h=f("String.prototype.charCodeAt"),y=f("String.prototype.slice"),d=function(t){var e=0;return{next:function(){var r,n=e>=t.length;return n||(r=t[e],e+=1),{done:n,value:r}}}},g=function(t,e){if(a(t)||n(t))return d(t);if(s(t)){var r=0;return{next:function(){var e=function(t,e){if(e+1>=t.length)return e+1;var r=h(t,e);if(r<55296||r>56319)return e+1;var n=h(t,e+1);return n<56320||n>57343?e+1:e+2}(t,r),n=y(t,r,e);return r=e,{done:e>t.length,value:n}}}}return e&&void 0!==t["_es6-shim iterator_"]?t["_es6-shim iterator_"]():void 0};if(u||l){var v=r(8379),m=r(9572),b=f("Map.prototype.forEach",!0),w=f("Set.prototype.forEach",!0);if("undefined"==typeof process||!process.versions||!process.versions.node)var S=f("Map.prototype.iterator",!0),x=f("Set.prototype.iterator",!0);var O=f("Map.prototype.@@iterator",!0)||f("Map.prototype._es6-shim iterator_",!0),j=f("Set.prototype.@@iterator",!0)||f("Set.prototype._es6-shim iterator_",!0);t.exports=function(t){return function(t){if(v(t)){if(S)return o(S(t));if(O)return O(t);if(b){var e=[];return b(t,(function(t,r){p(e,[r,t])})),d(e)}}if(m(t)){if(x)return o(x(t));if(j)return j(t);if(w){var r=[];return w(t,(function(t){p(r,t)})),d(r)}}}(t)||g(t)}}else t.exports=function(t){if(null!=t)return g(t,!0)}}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=/\./g,e="abcdefghijklmnopqrstuvwxyz";function n(t=10){for(var r="",n=0;n<t;n++)r+=e.charAt(Math.floor(Math.random()*e.length));return r}var o=t=>{var e=typeof t;return null!==t&&("object"===e||"function"===e)},i=new Set(["__proto__","prototype","constructor"]),a=new Set("0123456789");function s(t){var e=[],r="",n="start",o=!1;for(var s of t)switch(s){case"\\":if("index"===n)throw new Error("Invalid character in an index");if("indexEnd"===n)throw new Error("Invalid character after an index");o&&(r+=s),n="property",o=!o;break;case".":if("index"===n)throw new Error("Invalid character in an index");if("indexEnd"===n){n="property";break}if(o){o=!1,r+=s;break}if(i.has(r))return[];e.push(r),r="",n="property";break;case"[":if("index"===n)throw new Error("Invalid character in an index");if("indexEnd"===n){n="index";break}if(o){o=!1,r+=s;break}if("property"===n){if(i.has(r))return[];e.push(r),r=""}n="index";break;case"]":if("index"===n){e.push(Number.parseInt(r,10)),r="",n="indexEnd";break}if("indexEnd"===n)throw new Error("Invalid character after an index");default:if("index"===n&&!a.has(s))throw new Error("Invalid character in an index");if("indexEnd"===n)throw new Error("Invalid character after an index");"start"===n&&(n="property"),o&&(o=!1,r+="\\"),r+=s}switch(o&&(r+="\\"),n){case"property":if(i.has(r))return[];e.push(r);break;case"index":throw new Error("Index was not closed");case"start":e.push("")}return e}function c(t,e){if("number"!=typeof e&&Array.isArray(t)){var r=Number.parseInt(e,10);return Number.isInteger(r)&&t[r]===t[e]}return!1}function u(t){var e=t.split("."),r=e.length;return 1===r?e=>e[t]:t=>{for(var n=t,o=0;o<r;++o)if(void 0===(n=n[e[o]]))return n;return n}}function l(t){return Object.assign({},t)}var f=function t(e){if(!e)return e;if(null===e||"object"!=typeof e)return e;if(Array.isArray(e)){for(var r=new Array(e.length),n=r.length;n--;)r[n]=t(e[n]);return r}var o={};for(var i in e)o[i]=t(e[i]);return o};function p(t){return t[t.length-1]}function h(t){return Array.isArray(t)?t.slice(0):[t]}function y(t){return Array.isArray(t)}function d(t,e){var r=0,n=-1;for(var o of t){if(!e(o,n+=1))break;r+=1}return r}function g(t){for(var e=0,r=t.length;r--;)e+=t[r];return e}function v(t,e){var r=e.length;if(0!==r){var n=t.length;t.length=n+e.length;for(var o=0;o<r;++o)t[n+o]=e[o]}}var m=1;function b(e,r){var n=function(t,e,r){if(Array.isArray(e)&&(e=e.join(".")),!e.includes(".")&&!e.includes("["))return t[e];if(!o(t)||"string"!=typeof e)return void 0===r?t:r;var n=s(e);if(0===n.length)return r;for(var i=0;i<n.length;i++){var a=n[i];if(null==(t=c(t,a)?i===n.length-1?void 0:null:t[a])){if(i!==n.length-1)return r;break}}return void 0===t?r:t}(e,function(t){for(;"."===t.charAt(0);)t=t.substr(1);for(;"."===t.slice(-1);)t=t.slice(0,-1);return t}("properties."+r.replace(t,".properties.")));return n}function w(t){return"string"==typeof t?t:t.key}function S(t){var e=w((t=l(t)).primaryKey);t.properties=l(t.properties),t.additionalProperties=!1,Object.prototype.hasOwnProperty.call(t,"keyCompression")||(t.keyCompression=!1),t.indexes=t.indexes?t.indexes.slice(0):[],t.required=t.required?t.required.slice(0):[],t.encrypted=t.encrypted?t.encrypted.slice(0):[],t.properties._rev={type:"string",minLength:1},t.properties._attachments={type:"object"},t.properties._deleted={type:"boolean"},t.properties._meta=x,t.required=t.required?t.required.slice(0):[],t.required.push("_deleted"),t.required.push("_rev"),t.required.push("_meta"),t.required.push("_attachments");var r=function(t){var e=Object.keys(t.properties).filter((e=>t.properties[e].final)),r=w(t.primaryKey);return e.push(r),"string"!=typeof t.primaryKey&&t.primaryKey.fields.forEach((t=>e.push(t))),e}(t);v(t.required,r),t.required=t.required.filter((t=>!t.includes("."))).filter(((t,e,r)=>r.indexOf(t)===e)),t.version=t.version||0;var n=t.indexes.map((t=>{var r=y(t)?t.slice(0):[t];return r.includes(e)||r.push(e),"_deleted"!==r[0]&&r.unshift("_deleted"),r}));0===n.length&&n.push(function(t){return["_deleted",t]}(e)),n.push(["_meta.lwt",e]),t.internalIndexes&&t.internalIndexes.map((t=>{n.push(t)}));var o=new Set;return n.filter((t=>{var e=t.join(",");return!o.has(e)&&(o.add(e),!0)})),t.indexes=n,t}var x={type:"object",properties:{lwt:{type:"number",minimum:m,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function O(t,e){if(!t)throw e||(e=""),new Error("ensureNotFalsy() is falsy: "+e);return t}var j={bufferSize:1,refCount:!0};function E(t=0){return new Promise((e=>setTimeout(e,t)))}Promise.resolve(!0),Promise.resolve(!1),Promise.resolve(null);var A=Promise.resolve(),_=function(){function t(t,e){this.queue=A,this.readTasks=[],this.beforeTaskReadOrWrite=[],this.lockId=t,this.abstractLock=e}var e=t.prototype;return e.runRead=function(t){return new Promise(((e,r)=>{this.readTasks.push((n=>t(n).then((t=>e(t))).catch((t=>r(t))))),this.triggerReadTasks()}))},e.triggerReadTasks=function(){this.queue=this.queue.then((()=>{if(0!==this.readTasks.length)return this.abstractLock.request(this.lockId,(async()=>{var t=this.readTasks;this.readTasks=[];var e={type:"READ",taskAmount:t.length,accessHandlers:new Map,awaitBeforeFinish:[]};return await Promise.all(this.beforeTaskReadOrWrite.map((t=>t(e)))),Promise.all(t.map((t=>t(e)))).then((()=>this.cleanupAfterRun(e)))}))})).catch((t=>{console.log("ERROR TaskQueue.triggerReadTasks.queue errored:"),console.log(t)}))},e.runWrite=function(t){return new Promise(((e,r)=>{this.queue=this.queue.then((()=>this.abstractLock.request(this.lockId,(async()=>{var n={type:"WRITE",taskAmount:1,accessHandlers:new Map,awaitBeforeFinish:[]};return await Promise.all(this.beforeTaskReadOrWrite.map((t=>t(n)))),t(n).then((t=>{e(t)})).catch((t=>r(t))).then((()=>this.cleanupAfterRun(n)))}))))}))},e.runInit=function(t){return new Promise(((e,r)=>{this.queue=this.queue.then((()=>this.abstractLock.request(this.lockId,(async()=>{var n={type:"INIT",taskAmount:1,accessHandlers:new Map,awaitBeforeFinish:[]};return t(n).then((t=>e(t))).catch((t=>r(t))).then((()=>this.cleanupAfterRun(n)))}))))}))},e.cleanupAfterRun=async function(t){await Promise.all(t.awaitBeforeFinish.map((t=>t()))),await Promise.all(Array.from(t.accessHandlers.values()).map((t=>t.then((t=>t.close())).catch((t=>{})))))},e.awaitIdle=async function(){for(;;){var t=this.queue;if(await this.queue,this.queue===t)return}},t}();function P(t,e){var r=e.accessHandlers.get(t);return r||(r=t.createAccessHandle(),e.accessHandlers.set(t,r)),r}function I(t,e){var r=t.get(e);if(void 0===r)throw new Error("missing value from map "+e);return r}function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function R(t){var e=function(t,e){if("object"!=k(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==k(e)?e:e+""}function $(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R(n.key),n)}}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}function N(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(N=function(){return!!t})()}function F(t){var e="function"==typeof Map?new Map:void 0;return F=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(t,e,r){if(N())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&M(o,r.prototype),o}(t,arguments,T(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),M(r,t)},F(t)}var B={isDevMode:()=>!1,deepFreezeWhenDevMode:t=>t,tunnelErrorMessage:t=>"RxDB Error-Code "+t+".\n        Error messages are not included in RxDB core to reduce build size.\n        "};function D(t,e,r){return"RxError ("+e+"):\n"+t+"\n"+function(t){var e="";return 0===Object.keys(t).length?e:(e+="Given parameters: {\n",e+=Object.keys(t).map((e=>{var r="[object Object]";try{r="errors"===e?t[e].map((t=>JSON.stringify(t,Object.getOwnPropertyNames(t)))):JSON.stringify(t[e],(function(t,e){return void 0===e?null:e}),2)}catch(t){}return e+":"+r})).join("\n"),e+="}")}(r)}var C=function(t){function e(e,r,n={}){var o,i=D(r,e,n);return(o=t.call(this,i)||this).code=e,o.message=i,o.url=H(e),o.parameters=n,o.rxdb=!0,o}var r,n;return n=t,(r=e).prototype=Object.create(n.prototype),r.prototype.constructor=r,M(r,n),e.prototype.toString=function(){return this.message},function(t,e,r){return e&&$(t.prototype,e),r&&$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])}(F(Error));function H(t){return"https://rxdb.info/errors.html?console=errors#"+t}function U(t){return"\n You can find out more about this error here: "+H(t)+" "}function L(t,e){return new C(t,B.tunnelErrorMessage(t)+U(t),e)}var W=String.fromCharCode(65535),q=Number.MIN_SAFE_INTEGER;function z(t,e){var r=e.selector,n=t.indexes?t.indexes.slice(0):[];e.index&&(n=[e.index]);var o=!!e.sort.find((t=>"desc"===Object.values(t)[0])),i=new Set;Object.keys(r).forEach((e=>{var n=b(t,e);n&&"boolean"===n.type&&Object.prototype.hasOwnProperty.call(r[e],"$eq")&&i.add(e)}));var a,s=e.sort.map((t=>Object.keys(t)[0])).filter((t=>!i.has(t))).join(","),c=-1;if(n.forEach((t=>{var n=!0,u=!0,l=t.map((t=>{var e=r[t],o=e?Object.keys(e):[],i={};return e&&o.length?o.forEach((t=>{if(K.has(t)){var r=function(t,e){switch(t){case"$eq":return{startKey:e,endKey:e,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:e,inclusiveEnd:!0};case"$gte":return{startKey:e,inclusiveStart:!0};case"$lt":return{endKey:e,inclusiveEnd:!1};case"$gt":return{startKey:e,inclusiveStart:!1};default:throw new Error("SNH")}}(t,e[t]);i=Object.assign(i,r)}})):i={startKey:u?q:W,endKey:n?W:q,inclusiveStart:!0,inclusiveEnd:!0},void 0===i.startKey&&(i.startKey=q),void 0===i.endKey&&(i.endKey=W),void 0===i.inclusiveStart&&(i.inclusiveStart=!0),void 0===i.inclusiveEnd&&(i.inclusiveEnd=!0),u&&!i.inclusiveStart&&(u=!1),n&&!i.inclusiveEnd&&(n=!1),i})),f=l.map((t=>t.startKey)),p=l.map((t=>t.endKey)),h={index:t,startKeys:f,endKeys:p,inclusiveEnd:n,inclusiveStart:u,sortSatisfiedByIndex:!o&&s===t.filter((t=>!i.has(t))).join(","),selectorSatisfiedByIndex:J(t,e.selector,f,p)},y=function(t,e,r){var n=0,o=t=>{t>0&&(n+=t)},i=10,a=d(r.startKeys,(t=>t!==q&&t!==W));o(a*i);var s=d(r.startKeys,(t=>t!==W&&t!==q));o(s*i);var c=d(r.startKeys,((t,e)=>t===r.endKeys[e]));return o(c*i*1.5),o(r.sortSatisfiedByIndex?5:0),n}(0,0,h);(y>=c||e.index)&&(c=y,a=h)})),!a)throw L("SNH",{query:e});return a}var K=new Set(["$eq","$gt","$gte","$lt","$lte"]),V=new Set(["$eq","$gt","$gte"]),G=new Set(["$eq","$lt","$lte"]);function J(t,e,r,n){var o=Object.entries(e).find((([e,r])=>!t.includes(e)||Object.entries(r).find((([t,e])=>!K.has(t)))));if(o)return!1;if(e.$and||e.$or)return!1;var i=[],a=new Set;for(var[s,c]of Object.entries(e)){if(!t.includes(s))return!1;var u=Object.keys(c).filter((t=>V.has(t)));if(u.length>1)return!1;var l=u[0];if(l&&a.add(s),"$eq"!==l){if(i.length>0)return!1;i.push(l)}}var f=[],p=new Set;for(var[h,y]of Object.entries(e)){if(!t.includes(h))return!1;var d=Object.keys(y).filter((t=>G.has(t)));if(d.length>1)return!1;var g=d[0];if(g&&p.add(h),"$eq"!==g){if(f.length>0)return!1;f.push(g)}}var v=0;for(var m of t){for(var b of[a,p]){if(!b.has(m)&&b.size>0)return!1;b.delete(m)}if(r[v]!==n[v]&&a.size>0&&p.size>0)return!1;v++}return!0}function Q(t,e){var r=e.map((e=>{var r=b(t,e);if(!r)throw new Error("not in schema: "+e);var n,o=r.type;"number"!==o&&"integer"!==o||(n=Y(r));var i,a=u(e),s=r.maxLength?r.maxLength:0;return i="string"===o?t=>{var e=a(t);return e||(e=""),e.padEnd(s," ")}:"boolean"===o?t=>a(t)?"1":"0":t=>{var e=a(t);return Z(n,e)},{fieldName:e,schemaPart:r,parsedLengths:n,getValue:a,getIndexStringPart:i}}));return r}function Y(t){var e=Math.floor(t.minimum),r=Math.ceil(t.maximum),n=t.multipleOf,o=(r-e).toString().length,i=n.toString().split("."),a=0;return i.length>1&&(a=i[1].length),{minimum:e,maximum:r,nonDecimals:o,decimals:a,roundedMinimum:e}}function X(t,e){return t.slice(-1*e).trim()}function Z(t,e){void 0===e&&(e=0),e<t.minimum&&(e=t.minimum),e>t.maximum&&(e=t.maximum);var r=(Math.floor(e)-t.roundedMinimum).toString().padStart(t.nonDecimals,"0");if(t.decimals>0){var n=e.toString().split(".");r+=(n.length>1?n[1]:"0").padEnd(t.decimals,"0")}return r}function tt(t,e,r){var n="";return e.forEach(((e,o)=>{var i=b(t,e),a=r[o],s=i.type;switch(s){case"string":var c=O(i.maxLength,"maxLength not set");n+="string"==typeof a?a.padEnd(c," "):"".padEnd(c," ");break;case"boolean":n+=null===a||a===q?"0":a===W||a?"1":"0";break;case"number":case"integer":var u=Y(i);if(null===a||a===q)n+="0".repeat(u.nonDecimals+u.decimals);else if(a===W)n+=Z(u,u.maximum);else{var l=Z(u,a);n+=l}break;default:throw new Error("unknown index type "+s)}})),n}function et(t,e,r){var n="";return e.forEach(((e,o)=>{var i=b(t,e),a=r[o],s=i.type;switch(s){case"string":var c=O(i.maxLength,"maxLength not set");n+="string"==typeof a&&a!==W?a.padEnd(c," "):"".padEnd(c,a===q?" ":W);break;case"boolean":n+=null===a||a?"1":"0";break;case"number":case"integer":var u=Y(i);n+=null===a||a===W?"9".repeat(u.nonDecimals+u.decimals):a===q?"0".repeat(u.nonDecimals+u.decimals):Z(u,a);break;default:throw new Error("unknown index type "+s)}})),n}var rt=new TextDecoder,nt=new TextDecoder,ot=new TextEncoder,it=function(){function t(t,e,r){this.fileHandle=t,this.headerSize=e,this.cells=r,this.cellSizes=r.map((t=>t.length)),this.rowLength=g(this.cellSizes)}var e=t.prototype;return e.getAccessHandle=function(t){return this.fileHandle.then((e=>P(e,t)))},e.readHeader=async function(t){var e=await this.getAccessHandle(t),r=await e.read(0,this.headerSize);if(r.find((t=>0!==t))){var n=nt.decode(r).trim();return JSON.parse(n)}},e.writeHeader=async function(t,e){var r=ot.encode(JSON.stringify(e).padStart(this.headerSize," ")),n=await this.getAccessHandle(t),o=await n.getWritable();await o.write(r,{at:0})},e.readRows=async function(t,e,r){var n=await this.getAccessHandle(t),o=this.headerSize+e*this.rowLength,i=await async function(t,e=0){var r=e>>>0,n=await t.read(r);return rt.decode(n)}(n,o);!function(t,e,r){!function(t,e,r){for(var n=t.length,o=0;o<n;){var i=t.slice(o,o+e);o+=e,r(i)}}(t,g(e),(t=>{var n=function(t,e){var r=[],n=0;for(var o of e){var i=t.slice(n,n+o);n+=o,r.push(i)}return r}(t,e);r(n)}))}(i,this.cellSizes,(t=>{var e=this.cells.map(((e,r)=>{var n=t[r];if("number"===e.type)return parseInt(n,10);if("string"===e.type)return n;throw new Error("unknown type "+e.type)}));r(e)}))},e.getRowString=function(t){for(var e="",r=this.cells,n=r.length,o=0;o<n;o++){var i=r[o],a=t[o];"number"===i.type?e+=de(a,r[o].length):e+=a}return e},e.appendRows=async function(t,e){var r=await this.getAccessHandle(t),n=await r.getSize();n<this.headerSize&&(n=this.headerSize);for(var o="",i=this.rowLength,a=e.length,s=0;s<a;s++){var c=e[s],u=this.getRowString(c);if(u.length!==i)throw new Error("rowString has wrong length ("+u.length+")");o+=u}var l=ot.encode(o),f=await r.getWritable();return await f.write(l,{at:n}),{startPosition:n}},e.replaceContent=async function(t,e){var r=await this.getAccessHandle(t),n=e.map((t=>this.getRowString(t))).join(""),o=ot.encode(n),i=await r.getWritable();await i.write(o,{at:this.headerSize});var a=this.headerSize+n.length;await r.truncate(a)},e.empty=async function(t){var e=await this.getAccessHandle(t);await e.truncate(this.headerSize)},t}();function at(t){return t.join("||")}var st=["_deleted","_meta.lwt"];function ct(t,e,r,n,o){for(var i=o+1;n<=o;){var a=n+o>>>1,s=t[a];(void 0!==r?r(s,e):s-e)>=0?(i=a,o=a-1):n=a+1}return i}function ut(t,e,r,n,o){for(var i=o+1;n<=o;){var a=n+o>>>1,s=t[a];(void 0!==r?r(s,e):s-e)>0?(i=a,o=a-1):n=a+1}return i}function lt(t,e,r,n,o){for(var i=n-1;n<=o;){var a=n+o>>>1,s=t[a];(void 0!==r?r(s,e):s-e)<0?(i=a,n=a+1):o=a-1}return i}function ft(t,e,r,n,o){for(var i=n-1;n<=o;){var a=n+o>>>1,s=t[a];(void 0!==r?r(s,e):s-e)<=0?(i=a,n=a+1):o=a-1}return i}function pt(t,e,r,n,o){for(;n<=o;){var i=n+o>>>1,a=t[i],s=void 0!==r?r(a,e):a-e;if(0===s)return i;s<=0?n=i+1:o=i-1}return-1}function ht(t,e,r,n,o,i){return i(t,e,r,void 0===n?0:0|n,void 0===o?t.length-1:0|o)}function yt(t,e,r,n,o){return ht(t,e,r,n,o,ct)}function dt(t,e,r,n,o){return ht(t,e,r,n,o,ut)}function gt(t,e,r,n,o){return ht(t,e,r,n,o,lt)}function vt(t,e,r,n,o){return ht(t,e,r,n,o,ft)}function mt(t,e,r,n,o){return ht(t,e,r,n,o,pt)}function bt(t,e,r,n){var o,i=t.length,a=i-1,s=0;if(0===i)return t.push(e),0;for(;n<=a;)r(o=t[s=n+(a-n>>1)],e)<=0?n=s+1:a=s-1;return r(o,e)<=0&&s++,t.splice(s,0,e),s}at(st);var wt=function(){function t(t,e,r,n,o){this.rows=[],this.indexId=t,this.index=e,this.schema=n,this.jsonPositionSize=o,this.name=at(this.index),this.fileHandle=r.then((e=>e.getFileHandle(function(t){return"index-"+de(t,5)+".txt"}(t),{create:!0}))),this.getIndexableString=function(t,e){var r=Q(t,e),n=r.length,o=r.map((t=>t.getIndexStringPart));return function(t){for(var e="",r=0;r<n;++r)e+=o[r](t);return e}}(this.schema,this.index),this.indexableStringLength=function(t,e){var r=Q(t,e),n=0;return r.forEach((t=>{var e=t.schemaPart,r=e.type;if("string"===r)n+=e.maxLength;else if("boolean"===r)n+=1;else{var o=t.parsedLengths;n=n+o.nonDecimals+o.decimals}})),n}(this.schema,this.index),this.primaryPath=w(this.schema.primaryKey),this.primaryKeyLength=O(this.schema.properties[this.primaryPath].maxLength),this.metaIdMap=0===t?new Map:void 0,this.indexFile=new it(this.fileHandle,0,[{type:"string",length:this.indexableStringLength},{type:"number",length:o},{type:"number",length:o}])}var e=t.prototype;return e.initRead=async function(t){this.metaIdMap&&this.metaIdMap.clear(),await this.indexFile.readRows(t,0,(t=>{var[e,r,n]=t,o=X(e,this.primaryKeyLength).trim(),i=[e,o,r,n];this.metaIdMap&&this.metaIdMap.set(o,i),this.rows.push(i)}))},e.runChangelogOperation=function(t){var e=t[1],r=t[3],n=r[1];if("A"===t[2])this.rows.splice(e,0,r),this.metaIdMap&&this.metaIdMap.set(n,r);else if("D"===t[2])this.rows.splice(e,1),this.metaIdMap&&this.metaIdMap.delete(n);else{if("R"!==t[2])throw new Error("unknown operation key "+t[2]);this.rows[e]=r,this.metaIdMap&&this.metaIdMap.set(n,r)}},e.appendWriteOperations=function(t,e,r){for(var n=[],o=t.length,i=0;i<o;i++){var a=t[i],s=e[i],c=a.documentId,u=this.getIndexableString(a.documentData),l=a.previousDocumentData?this.getIndexableString(a.previousDocumentData):null,f=l?mt(this.rows,[l],be):-1,p=[u,c,s[0],s[1]];this.metaIdMap&&this.metaIdMap.set(c,p),u===l?(this.rows[f]=p,r.push([this.indexId,f,"R",[u,c,s[0],s[1]]])):(a.previousDocumentData&&(this.rows.splice(f,1),r.push([this.indexId,f,"D",[O(l),c,s[0],s[1]]])),n.push(p))}for(var h=0,y=(n=n.sort(St)).length,d=0;d<y;d++){var g=n[d];h=bt(this.rows,g,St,h),r.push([this.indexId,h,"A",g])}return r},e.changeDocumentPosition=function(t,e){var r=this.getIndexableString(t),n=mt(this.rows,[r],be),o=[r,t[this.primaryPath],e[0],e[1]];return this.rows[n]=o,[this.indexId,n,"R",o]},t}();function St(t,e){return t[0]<e[0]?-1:1}var xt=8,Ot=5;async function jt(t,e,r,n=0){var o={lastRowId:n,operationsByIndexId:new Map};return await e.readRows(t,n,(t=>{o.lastRowId=o.lastRowId+1;var[e,n,i,a,s,c]=t,u=function(t,e,r,n){var o=t.get(e);return void 0===o?(o=r(),t.set(e,o)):n&&n(o),o}(o.operationsByIndexId,e,(()=>[])),l=r[e],f=a.slice(0,l.indexableStringLength),p=X(f,l.primaryKeyLength).trim();u.push([e,n,i,[f,p,s,c]])})),o}async function Et(t,e,r,n){var o=r.map((t=>[t[0],t[1],t[2],t[3][0].padEnd(n),t[3][2],t[3][3]]));await e.appendRows(t,o)}var At=function(t,e){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},At(t,e)};function _t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}At(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function Pt(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))}function It(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function kt(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rt(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function $t(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}function Mt(t){return this instanceof Mt?(this.v=t,this):new Mt(t)}function Tt(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),i=[];return n={},a("next"),a("throw"),a("return",(function(t){return function(e){return Promise.resolve(e).then(t,u)}})),n[Symbol.asyncIterator]=function(){return this},n;function a(t,e){o[t]&&(n[t]=function(e){return new Promise((function(r,n){i.push([t,e,r,n])>1||s(t,e)}))},e&&(n[t]=e(n[t])))}function s(t,e){try{(r=o[t](e)).value instanceof Mt?Promise.resolve(r.value.v).then(c,u):l(i[0][2],r)}catch(t){l(i[0][3],t)}var r}function c(t){s("next",t)}function u(t){s("throw",t)}function l(t,e){t(e),i.shift(),i.length&&s(i[0][0],i[0][1])}}function Nt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=kt(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,o){!function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)}(n,o,(e=t[r](e)).done,e.value)}))}}}function Ft(t){return"function"==typeof t}function Bt(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var Dt=Bt((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function Ct(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var Ht=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}var e;return t.prototype.unsubscribe=function(){var t,e,r,n,o;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var a=kt(i),s=a.next();!s.done;s=a.next())s.value.remove(this)}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}else i.remove(this);var c=this.initialTeardown;if(Ft(c))try{c()}catch(t){o=t instanceof Dt?t.errors:[t]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var l=kt(u),f=l.next();!f.done;f=l.next()){var p=f.value;try{Wt(p)}catch(t){o=null!=o?o:[],t instanceof Dt?o=$t($t([],Rt(o)),Rt(t.errors)):o.push(t)}}}catch(t){r={error:t}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}}if(o)throw new Dt(o)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)Wt(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&Ct(e,t)},t.prototype.remove=function(e){var r=this._finalizers;r&&Ct(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),Ut=Ht.EMPTY;function Lt(t){return t instanceof Ht||t&&"closed"in t&&Ft(t.remove)&&Ft(t.add)&&Ft(t.unsubscribe)}function Wt(t){Ft(t)?t():t.unsubscribe()}var qt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},zt={setTimeout:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=zt.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,$t([t,e],Rt(r))):setTimeout.apply(void 0,$t([t,e],Rt(r)))},clearTimeout:function(t){var e=zt.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Kt(t){zt.setTimeout((function(){var e=qt.onUnhandledError;if(!e)throw t;e(t)}))}function Vt(){}var Gt=Jt("C",void 0,void 0);function Jt(t,e,r){return{kind:t,value:e,error:r}}var Qt=null;function Yt(t){if(qt.useDeprecatedSynchronousErrorHandling){var e=!Qt;if(e&&(Qt={errorThrown:!1,error:null}),t(),e){var r=Qt,n=r.errorThrown,o=r.error;if(Qt=null,n)throw o}}else t()}var Xt=function(t){function e(e){var r=t.call(this)||this;return r.isStopped=!1,e?(r.destination=e,Lt(e)&&e.add(r)):r.destination=ie,r}return _t(e,t),e.create=function(t,e,r){return new re(t,e,r)},e.prototype.next=function(t){this.isStopped?oe(function(t){return Jt("N",t,void 0)}(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?oe(Jt("E",void 0,t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?oe(Gt,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Ht),Zt=Function.prototype.bind;function te(t,e){return Zt.call(t,e)}var ee=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(t){ne(t)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(t){ne(t)}else ne(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){ne(t)}},t}(),re=function(t){function e(e,r,n){var o,i,a=t.call(this)||this;return Ft(e)||!e?o={next:null!=e?e:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:a&&qt.useDeprecatedNextContext?((i=Object.create(e)).unsubscribe=function(){return a.unsubscribe()},o={next:e.next&&te(e.next,i),error:e.error&&te(e.error,i),complete:e.complete&&te(e.complete,i)}):o=e,a.destination=new ee(o),a}return _t(e,t),e}(Xt);function ne(t){var e;qt.useDeprecatedSynchronousErrorHandling?(e=t,qt.useDeprecatedSynchronousErrorHandling&&Qt&&(Qt.errorThrown=!0,Qt.error=e)):Kt(t)}function oe(t,e){var r=qt.onStoppedNotification;r&&zt.setTimeout((function(){return r(t,e)}))}var ie={closed:!0,next:Vt,error:function(t){throw t},complete:Vt},ae="function"==typeof Symbol&&Symbol.observable||"@@observable";function se(t){return t}function ce(t){return 0===t.length?se:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var ue=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n,o=this,i=(n=t)&&n instanceof Xt||function(t){return t&&Ft(t.next)&&Ft(t.error)&&Ft(t.complete)}(n)&&Lt(n)?t:new re(t,e,r);return Yt((function(){var t=o,e=t.operator,r=t.source;i.add(e?e.call(i,r):r?o._subscribe(i):o._trySubscribe(i))})),i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=le(e))((function(e,n){var o=new re({next:function(e){try{t(e)}catch(t){n(t),o.unsubscribe()}},error:n,complete:e});r.subscribe(o)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[ae]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ce(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=le(t))((function(t,r){var n;e.subscribe((function(t){return n=t}),(function(t){return r(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function le(t){var e;return null!==(e=null!=t?t:qt.Promise)&&void 0!==e?e:Promise}var fe=Bt((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),pe=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return _t(e,t),e.prototype.lift=function(t){var e=new he(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new fe},e.prototype.next=function(t){var e=this;Yt((function(){var r,n;if(e._throwIfClosed(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var o=kt(e.currentObservers),i=o.next();!i.done;i=o.next())i.value.next(t)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}}))},e.prototype.error=function(t){var e=this;Yt((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var r=e.observers;r.length;)r.shift().error(t)}}))},e.prototype.complete=function(){var t=this;Yt((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,r=this,n=r.hasError,o=r.isStopped,i=r.observers;return n||o?Ut:(this.currentObservers=null,i.push(t),new Ht((function(){e.currentObservers=null,Ct(i,t)})))},e.prototype._checkFinalizedStatuses=function(t){var e=this,r=e.hasError,n=e.thrownError,o=e.isStopped;r?t.error(n):o&&t.complete()},e.prototype.asObservable=function(){var t=new ue;return t.source=this,t},e.create=function(t,e){return new he(t,e)},e}(ue),he=function(t){function e(e,r){var n=t.call(this)||this;return n.destination=e,n.source=r,n}return _t(e,t),e.prototype.next=function(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)},e.prototype.error=function(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:Ut},e}(pe);async function ye(t,e,r,n){var o,i=t.getDirectory(),a=["rxdb",ve((o={databaseName:e.databaseName,collectionName:e.collectionName,schemaVersion:e.schema.version}).databaseName),ve(o.collectionName),o.schemaVersion].join("-"),s=i.then((t=>t.getDirectoryHandle(a,{create:!0}))),c=s.then((t=>t.getFileHandle("documents.json",{create:!0})));return r.runInit((async t=>{var o,a=c.then((e=>P(e,t))),u=s.then((t=>t.getFileHandle("changes.json",{create:!0}))),l=w(e.schema.primaryKey),f=O(e.schema.properties[l].maxLength),p=function(t){var e=w(t.primaryKey),r=h(t.indexes?t.indexes:[]);(r=(r=function(t){return t.map((t=>({index:t,str:t.join(",")}))).sort(((t,e)=>t.str>e.str?1:t.str<e.str?-1:0)).map((t=>t.index))}(r)).map((t=>t.slice(0)))).push(["_meta.lwt",e]),r.push(st);var n=new Set;return r.slice().filter((t=>{var e=at(t);return!n.has(e)&&(n.add(e),!0)}))}(e.schema),y=p.map(((t,r)=>new wt(r,t,s,e.schema,n))),d=(o=y.map((t=>t.indexableStringLength)),Math.max(...o)),g=function(t,e,r){return new it(t.then((t=>t.getFileHandle("changelog.txt",{create:!0}))),0,[{type:"number",length:Ot},{type:"number",length:xt},{type:"string",length:1},{type:"string",length:e},{type:"number",length:r},{type:"number",length:r}])}(s,d,n),v=await a;if(await v.getSize()>0){var[m,b]=await Promise.all([Promise.all(y.map((e=>e.initRead(t)))),jt(t,g,y,0)]);Array.from(b.operationsByIndexId.entries()).map((([t,e])=>{var r=y[t];e.forEach((t=>r.runChangelogOperation(t)))}))}var S=e.multiInstance?new BroadcastChannel(r.lockId):void 0;S&&S.unref&&S.unref();var x=new pe;return S&&(S.onmessage=t=>{var e=t.data;x.next(e)}),{params:e,taskQueue:r,indexStates:y,primaryPath:l,primaryKeyLength:f,root:await i,dirHandle:await s,changesFileHandle:await u,documentFileHandle:await c,changelogFile:g,maxIndexableStringLength:d,broadcastChannel:S,broadcastChannelMessages$:x,mightHaveUnprocessedChanges:!1}}))}function de(t,e){return(t+"").padStart(e,"number"==typeof t?"0":" ")}var ge=8;function ve(t){return t.replace(/\//g,"__")}function me(t){return O(t.indexStates[0]).rows.length}function be(t,e){return t[0]<e[0]?-1:t[0]===e[0]?0:1}function we(t,e,r,n){if(e.broadcastChannel){var o={type:"event",eventBulk:n,changelogOperations:r,info:{db:t.databaseName,col:t.collectionName}};e.broadcastChannel.postMessage(o)}}var Se=0;function xe(){var t=Date.now();(t+=.01)<=Se&&(t=Se+.01);var e=parseFloat(t.toFixed(2));return Se=e,e}function Oe(t,e){if(!e.sort)throw L("SNH",{query:e});return{query:e,queryPlan:z(t,e)}}class je extends Error{}const Ee=Number.MAX_SAFE_INTEGER,Ae=Number.MIN_SAFE_INTEGER,_e=Symbol("missing"),Pe=Object.freeze(new Error("mingo: cycle detected while processing object/array")),Ie=/^\[object ([a-zA-Z0-9]+)\]$/,ke=t=>{const e=ur(t);let r=0,n=e.length;for(;n;)r=(r<<5)-r^e.charCodeAt(--n);return r>>>0},Re=new Set(["null","undefined","boolean","number","string","date","regexp"]),$e={null:0,undefined:0,number:1,string:2,object:3,array:4,boolean:5,date:6,regexp:7,function:8},Me=(t,e)=>{t===_e&&(t=void 0),e===_e&&(e=void 0);const[r,n]=[t,e].map((t=>$e[Ne(t).toLowerCase()]));return r!==n?r-n:1===r||2===r||6===r?t<e?-1:t>e?1:0:sr(t,e)?0:t<e?-1:t>e?1:0};function Te(t,e){if(!t)throw new je(e)}const Ne=t=>Ie.exec(Object.prototype.toString.call(t))[1],Fe=t=>"boolean"==typeof t,Be=t=>"string"==typeof t,De=t=>!isNaN(t)&&"number"==typeof t,Ce=Array.isArray,He=t=>{if(!t)return!1;const e=Object.getPrototypeOf(t);return(e===Object.prototype||null===e)&&"[object Object]"===Object.prototype.toString.call(t)},Ue=t=>t===Object(t),Le=t=>t instanceof Date,We=t=>t instanceof RegExp,qe=t=>"function"==typeof t,ze=t=>null==t,Ke=(t,e)=>t.includes(e),Ve=(t,e)=>!Ke(t,e),Ge=t=>ze(t)||Be(t)&&!t||t instanceof Array&&0===t.length||He(t)&&0===Object.keys(t).length,Je=t=>t===_e,Qe=t=>t instanceof Array?t:[t],Ye=(t,e)=>!!t&&Object.prototype.hasOwnProperty.call(t,e),Xe=t=>"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView(t),Ze=[Le,We,Xe],tr=(t,e)=>{if(ze(t))return t;if(e.has(t))throw Pe;const r=t.constructor;if(Ze.some((e=>e(t))))return new r(t);try{if(e.add(t),Ce(t))return t.map((t=>tr(t,e)));if(He(t)){const r={};for(const n in t)r[n]=tr(t[n],e);return r}}finally{e.delete(t)}return t},er=t=>tr(t,new Set),rr=(t,e)=>He(t)&&He(e)||Ce(t)&&Ce(e);function nr(t,e,r){if(r=r||{flatten:!1},Je(t)||ze(t))return e;if(Je(e)||ze(e))return t;if(!rr(t,e)){if(r.skipValidation)return e||t;throw Error("mismatched types. must both be array or object")}if(r.skipValidation=!0,Ce(t)){const n=t,o=e;if(r.flatten){let t=0,i=0;for(;t<n.length&&i<o.length;)n[t]=nr(n[t++],o[i++],r);for(;i<o.length;)n.push(e[i++])}else hr(n,o)}else for(const n in e)t[n]=nr(t[n],e[n],r);return t}function or(t,e=ke){const r=new Map;return t.forEach(((n,o)=>{const i=lr(n,e);r.has(i)?r.get(i).some((e=>sr(t[e],n)))||r.get(i).push(o):r.set(i,[o])})),r}function ir(t,e=ke){if(t.some((t=>0==t.length)))return[];if(1===t.length)return Array.from(t);const r=function(t,e,r=Me){if(Ge(t))return t;const n=new Array,o=new Array;for(let r=0;r<t.length;r++){const i=t[r],a=e(i,r);ze(a)?o.push(i):n.push([a,i])}return n.sort(((t,e)=>r(t[0],e[0]))),hr(o,n.map((t=>t[1])))}(t.map(((t,e)=>[e,t.length])),(t=>t[1])),n=t[r[0][0]],o=or(n,e),i=new Map,a=new Array;return o.forEach(((e,o)=>{const s=e.map((t=>n[t])),c=s.map((t=>0)),u=s.map((t=>[r[0][0],0]));let l=!1;for(let e=1;e<t.length;e++){const[n,a]=r[e],f=t[n];if(i.has(e)||i.set(e,or(f)),i.get(e).has(o)){const t=i.get(e).get(o).map((t=>f[t]));l=s.map(((r,a)=>t.some(((t,s)=>{const l=c[a];return sr(r,t)&&(c[a]++,n<u[a][0]&&(u[a]=[n,i.get(e).get(o)[s]])),l<c[a]})))).some(Boolean)}if(!l)return}l&&hr(a,c.map(((e,r)=>e===t.length-1?[s[r],u[r]]:_e)).filter((t=>t!==_e)))})),a.sort(((t,e)=>{const[r,[n,o]]=t,[i,[a,s]]=e,c=Me(n,a);return 0!==c?c:Me(o,s)})).map((t=>t[0]))}function ar(t,e=0){const r=new Array;return function t(e,n){for(let o=0,i=e.length;o<i;o++)Ce(e[o])&&(n>0||n<0)?t(e[o],Math.max(-1,n-1)):r.push(e[o])}(t,e),r}function sr(t,e){if(t===e||Object.is(t,e))return!0;const r=!!t&&t.constructor||t;if(null===t||null===e||void 0===t||void 0===e||r!==e.constructor||r===Function)return!1;if(r===Array||r===Object){const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;if(new Set([...r,...n]).size!=r.length)return!1;for(const n of r)if(!sr(t[n],e[n]))return!1;return!0}const n=Object.getPrototypeOf(t);return(Xe(t)||n!==Object.prototype&&n!==Array.prototype&&Object.prototype.hasOwnProperty.call(n,"toString"))&&t.toString()===e.toString()}const cr=(t,e)=>{if(null===t)return"null";if(void 0===t)return"undefined";const r=t.constructor;switch(r){case RegExp:case Number:case Boolean:case Function:case Symbol:return t.toString();case String:return JSON.stringify(t);case Date:return t.toISOString()}if(Xe(t))return r.name+"["+t.toString()+"]";if(e.has(t))throw Pe;try{if(e.add(t),Ce(t))return"["+t.map((t=>cr(t,e))).join(",")+"]";if(r===Object)return"{"+Object.keys(t).sort().map((r=>r+":"+cr(t[r],e))).join(",")+"}";const n=Object.getPrototypeOf(t);if(n!==Object.prototype&&n!==Array.prototype&&Object.prototype.hasOwnProperty.call(n,"toString"))return r.name+"("+JSON.stringify(t.toString())+")";const[o,i]=(t=>{let[e,r]=[Object.getPrototypeOf(t),Object.getOwnPropertyNames(t)],n=e;for(;!r.length&&e!==Object.prototype&&e!==Array.prototype;)n=e,r=Object.getOwnPropertyNames(e),e=Object.getPrototypeOf(e);const o={};return r.forEach((e=>o[e]=t[e])),[o,n]})(t);return r.name+cr(o,e)}finally{e.delete(t)}},ur=t=>cr(t,new Set);function lr(t,e){return e=e||ke,ze(t)?null:e(t).toString()}function fr(t,e,r=ke){if(t.length<1)return new Map;const n=new Map,o=new Map;for(let i=0;i<t.length;i++){const a=t[i],s=e(a,i),c=lr(s,r);if(null===c)o.has(null)?o.get(null).push(a):o.set(null,[a]);else{const t=n.has(c)?n.get(c).find((t=>sr(t,s))):null;ze(t)?(o.set(s,[a]),n.has(c)?n.get(c).push(s):n.set(c,[s])):o.get(t).push(a)}}return o}const pr=5e4;function hr(t,...e){return t instanceof Array?e.reduce(((t,e)=>{let r=Math.ceil(e.length/pr),n=0;for(;r-- >0;)Array.prototype.push.apply(t,e.slice(n,n+pr)),n+=pr;return t}),t):e.filter(Ue).reduce(((t,e)=>(Object.assign(t,e),t)),t)}function yr(t,e){return Ue(t)?t[e]:void 0}function dr(t,e,r){let n=0;const o=Re.has(Ne(t).toLowerCase())?t:function t(e,r){let o=e;for(let e=0;e<r.length;e++){const i=r[e];if(null===/^\d+$/.exec(i)&&o instanceof Array){if(0===e&&n>0)break;n+=1;const i=r.slice(e);o=o.reduce(((e,r)=>{const n=t(r,i);return void 0!==n&&e.push(n),e}),[]);break}if(o=yr(o,i),void 0===o)break}return o}(t,e.split("."));return o instanceof Array&&r?.unwrapArray?function(t,e){if(e<1)return t;for(;e--&&1===t.length;)t=t[0];return t}(o,n):o}function gr(t,e,r){const n=e.split("."),o=n[0],i=n.slice(1).join("."),a=null!==/^\d+$/.exec(o),s=n.length>1;let c,u;if(t instanceof Array)if(a)c=yr(t,Number(o)),s&&(c=gr(c,i,r)),c=[c];else{c=[];for(const n of t)u=gr(n,e,r),r?.preserveMissing?(void 0===u&&(u=_e),c.push(u)):void 0!==u&&c.push(u)}else{if(u=yr(t,o),s&&(u=gr(u,i,r)),void 0===u)return;c=r?.preserveKeys?{...t}:{},c[o]=u}return c}function vr(t){if(t instanceof Array)for(let e=t.length-1;e>=0;e--)t[e]===_e?t.splice(e,1):vr(t[e]);else if(He(t))for(const e in t)Ye(t,e)&&vr(t[e])}const mr=/^\d+$/;function br(t,e,r,n){const o=e.split("."),i=o[0],a=o.slice(1).join(".");if(1===o.length)(He(t)||Ce(t)&&mr.test(i))&&r(t,i);else{n?.buildGraph&&ze(t[i])&&(t[i]={});const e=t[i];if(!e)return;const s=!!(o.length>1&&mr.test(o[1]));e instanceof Array&&n?.descendArray&&!s?e.forEach((t=>br(t,a,r,n))):br(e,a,r,n)}}function wr(t,e,r){br(t,e,((t,e)=>{t[e]=qe(r)?r(t[e]):r}),{buildGraph:!0})}function Sr(t,e,r){br(t,e,((t,e)=>{if(t instanceof Array){if(/^\d+$/.test(e))t.splice(parseInt(e),1);else if(r&&r.descendArray)for(const r of t)He(r)&&delete r[e]}else He(t)&&delete t[e]}),r)}const xr=/^\$[a-zA-Z0-9_]+$/;function Or(t){return xr.test(t)}function jr(t){if(Re.has(Ne(t).toLowerCase()))return We(t)?{$regex:t}:{$eq:t};if(Ue(t)){const e=t;if(!Object.keys(e).some(Or))return{$eq:t};if(Ye(t,"$regex")){const e={...t};return e.$regex=new RegExp(t.$regex,t.$options),delete e.$options,e}}return t}var Er=(t=>(t.CLONE_ALL="CLONE_ALL",t.CLONE_INPUT="CLONE_INPUT",t.CLONE_OUTPUT="CLONE_OUTPUT",t.CLONE_OFF="CLONE_OFF",t))(Er||{});class Ar{constructor(t,e,r,n=Date.now()){this._opts=t,this._root=e,this._local=r,this.timestamp=n,this.update(e,r)}static init(t,e,r){return t instanceof Ar?new Ar(t._opts,ze(t.root)?e:t.root,Object.assign({},t.local,r)):new Ar(t,e,r)}update(t,e){return this._root=t,this._local=e?Object.assign({},e,{variables:Object.assign({},this._local?.variables,e?.variables)}):e,this}getOptions(){return Object.freeze({...this._opts,context:Ir.from(this._opts.context)})}get root(){return this._root}get local(){return this._local}get idKey(){return this._opts.idKey}get collation(){return this._opts?.collation}get processingMode(){return this._opts?.processingMode||"CLONE_OFF"}get useStrictMode(){return this._opts?.useStrictMode}get scriptEnabled(){return this._opts?.scriptEnabled}get useGlobalContext(){return this._opts?.useGlobalContext}get hashFunction(){return this._opts?.hashFunction}get collectionResolver(){return this._opts?.collectionResolver}get jsonSchemaValidator(){return this._opts?.jsonSchemaValidator}get variables(){return this._opts?.variables}get context(){return this._opts?.context}}function _r(t){return t instanceof Ar?t.getOptions():Object.freeze({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:"CLONE_OFF",...t,context:t?.context?Ir.from(t?.context):Ir.init({})})}var Pr=(t=>(t.ACCUMULATOR="accumulator",t.EXPRESSION="expression",t.PIPELINE="pipeline",t.PROJECTION="projection",t.QUERY="query",t.WINDOW="window",t))(Pr||{});class Ir{constructor(t){this.operators={accumulator:{},expression:{},pipeline:{},projection:{},query:{},window:{}};for(const[e,r]of Object.entries(t))this.addOperators(e,r)}static init(t={}){return new Ir(t)}static from(t){return new Ir(t.operators)}addOperators(t,e){for(const[r,n]of Object.entries(e))this.getOperator(t,r)||(this.operators[t][r]=n);return this}addAccumulatorOps(t){return this.addOperators("accumulator",t)}addExpressionOps(t){return this.addOperators("expression",t)}addQueryOps(t){return this.addOperators("query",t)}addPipelineOps(t){return this.addOperators("pipeline",t)}addProjectionOps(t){return this.addOperators("projection",t)}addWindowOps(t){return this.addOperators("window",t)}getOperator(t,e){return t in this.operators&&this.operators[t][e]||null}}const kr=Ir.init();function Rr(t,e){for(const[r,n]of Object.entries(e)){Te(qe(n)&&Or(r),`'${r}' is not a valid operator`);const e=$r(t,r,null);Te(!e||n===e,`${r} already exists for '${t}' operators. Cannot change operator function once registered.`)}switch(t){case"accumulator":kr.addAccumulatorOps(e);break;case"expression":kr.addExpressionOps(e);break;case"pipeline":kr.addPipelineOps(e);break;case"projection":kr.addProjectionOps(e);break;case"query":kr.addQueryOps(e);break;case"window":kr.addWindowOps(e)}}function $r(t,e,r){const{context:n,useGlobalContext:o}=r||{},i=n?n.getOperator(t,e):null;return!i&&o?kr.getOperator(t,e):i}const Mr={$$ROOT:(t,e,r)=>r.root,$$CURRENT:(t,e,r)=>t,$$REMOVE(t,e,r){},$$NOW:(t,e,r)=>new Date(r.timestamp)},Tr={$$KEEP:(t,e,r)=>t,$$PRUNE(t,e,r){},$$DESCEND(t,e,r){if(!Ye(e,"$cond"))return t;let n;for(const[o,i]of Object.entries(t))if(Ue(i)){if(i instanceof Array){const t=[];for(let n of i)He(n)&&(n=Fr(n,e,r.update(n))),ze(n)||t.push(n);n=t}else n=Fr(i,e,r.update(i));ze(n)?delete t[o]:t[o]=n}return t}};function Nr(t,e,r,n){const o=Ar.init(n,t);if(Or(r=r||"")){const i=$r("expression",r,n);if(i)return i(t,e,o);const a=$r("accumulator",r,n);if(a)return t instanceof Array||(t=Nr(t,e,null,o),e=null),Te(t instanceof Array,`'${r}' target must be an array.`),a(t,e,o.update(null,o.local));throw new je(`operator '${r}' is not registered`)}if(Be(e)&&e.length>0&&"$"===e[0]){if(Ye(Tr,e))return e;let r=o.root;const n=e.split(".");if(Ye(Mr,n[0]))r=Mr[n[0]](t,null,o),e=e.slice(n[0].length+1);else if("$$"===n[0].slice(0,2)){r=Object.assign({},o.variables,{this:t},o.local?.variables);const i=n[0].slice(2);Te(Ye(r,i),`Use of undefined variable: ${i}`),e=e.slice(2)}else e=e.slice(1);return""===e?r:dr(r,e)}if(Ce(e))return e.map((e=>Nr(t,e,null,o)));if(He(e)){const r={};for(const[i,a]of Object.entries(e))if(r[i]=Nr(t,a,i,o),["expression","accumulator"].some((t=>!!$r(t,i,n))))return Te(1===Object.keys(e).length,"Invalid aggregation expression '"+JSON.stringify(e)+"'"),r[i];return r}return e}function Fr(t,e,r){const n=Nr(t,e,null,r);return Ye(Tr,n)?Tr[n](t,e,r):n}function Br(t){return t instanceof Hr?t:new Hr(t)}function Dr(t,e){const r=t.slice(e+1);t.splice(e),Array.prototype.push.apply(t,r)}const Cr=new Error;class Hr{constructor(t){let e;if(this.iteratees=[],this.yieldedValues=[],this.isDone=!1,t instanceof Function&&(t={next:t}),(r=t)&&"object"==typeof r&&r?.next instanceof Function){const r=t;e=()=>{const t=r.next();if(t.done)throw Cr;return t.value}}else if(t instanceof Array){const r=t,n=r.length;let o=0;e=()=>{if(o<n)return r[o++];throw Cr}}else if(!(t instanceof Function))throw new je("Lazy must be initialized with an array, generator, or function.");var r;this.getNext=function(t,e,r){let n=!1,o=-1,i=0;return function(a){try{t:for(;!n;){let s=t();o++;let c=-1;const u=e.length;let l=!1;for(;++c<u;){const t=e[c];switch(t.action){case 0:s=t.func(s,o);break;case 1:if(!t.func(s,o))continue t;break;case 2:--t.count,t.count||(l=!0);break;case 3:--t.count,t.count||Dr(e,c);continue t;default:break t}}if(n=l,!a)return{value:s,done:!1};r[i++]=s}}catch(t){if(t!==Cr)throw t}return n=!0,{done:n}}}(e,this.iteratees,this.yieldedValues)}push(t,e){return"function"==typeof e?this.iteratees.push({action:t,func:e}):"number"==typeof e&&this.iteratees.push({action:t,count:e}),this}next(){return this.getNext()}map(t){return this.push(0,t)}filter(t){return this.push(1,t)}take(t){return t>0?this.push(2,t):this}drop(t){return t>0?this.push(3,t):this}transform(t){const e=this;let r;return Br((()=>(r||(r=Br(t(e.value()))),r.next())))}value(){return this.isDone||(this.isDone=this.getNext(!0).done),this.yieldedValues}each(t){for(;;){const e=this.next();if(e.done)break;if(!1===t(e.value))return!1}return!0}reduce(t,e){let r=this.next();for(void 0!==e||r.done||(e=r.value,r=this.next());!r.done;)e=t(e,r.value),r=this.next();return e}size(){return this.reduce(((t,e)=>++t),0)}[Symbol.iterator](){return this}}class Ur{constructor(t,e){this.pipeline=t,this.options=_r(e)}stream(t){let e=Br(t);const r=this.options.processingMode;r!=Er.CLONE_ALL&&r!=Er.CLONE_INPUT||e.map(er);const n=new Array;if(!Ge(this.pipeline))for(const t of this.pipeline){const r=Object.keys(t),o=r[0],i=$r(Pr.PIPELINE,o,this.options);Te(1===r.length&&!!i,`invalid pipeline operator ${o}`),n.push(o),e=i(e,t[o],this.options)}return(r==Er.CLONE_OUTPUT||r==Er.CLONE_ALL&&ir([["$group","$unwind"],n]).length)&&e.map(er),e}run(t){return this.stream(t).value()}}class Lr{constructor(t,e,r,n){this.source=t,this.predicate=e,this.projection=r,this.options=n,this.operators=[],this.result=null,this.buffer=[]}fetch(){return this.result||(He(this.projection)&&this.operators.push({$project:this.projection}),this.result=Br(this.source).filter(this.predicate),this.operators.length>0&&(this.result=new Ur(this.operators,this.options).stream(this.result))),this.result}fetchAll(){const t=Br([...this.buffer]);return this.buffer=[],function(...t){let e=0;return Br((()=>{for(;e<t.length;){const r=t[e].next();if(!r.done)return r;e++}return{done:!0}}))}(t,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(t){return this.operators.push({$skip:t}),this}limit(t){return this.operators.push({$limit:t}),this}sort(t){return this.operators.push({$sort:t}),this}collation(t){return this.options={...this.options,collation:t},this}next(){if(this.buffer.length>0)return this.buffer.pop();const t=this.fetch().next();return t.done?void 0:t.value}hasNext(){if(this.buffer.length>0)return!0;const t=this.fetch().next();return!t.done&&(this.buffer.push(t.value),!0)}map(t){return this.all().map(t)}forEach(t){this.all().forEach(t)}[Symbol.iterator](){return this.fetchAll()}}class Wr{constructor(t,e){this.condition=t,this.options=_r(e),this.compiled=[],this.compile()}compile(){Te(He(this.condition),`query criteria must be an object: ${JSON.stringify(this.condition)}`);const t={};for(const[e,r]of Object.entries(this.condition)){if("$where"===e)Object.assign(t,{field:e,expr:r});else if(Ke(["$and","$or","$nor","$expr","$jsonSchema"],e))this.processOperator(e,e,r);else{Te(!Or(e),`unknown top level operator: ${e}`);for(const[t,n]of Object.entries(jr(r)))this.processOperator(e,t,n)}t.field&&this.processOperator(t.field,t.field,t.expr)}}processOperator(t,e,r){const n=$r(Pr.QUERY,e,this.options);if(!n)throw new je(`unknown query operator ${e}`);const o=n(t,r,this.options);this.compiled.push(o)}test(t){for(let e=0,r=this.compiled.length;e<r;e++)if(!this.compiled[e](t))return!1;return!0}find(t,e){return new Lr(t,(t=>this.test(t)),e||{},this.options)}remove(t){return t.reduce(((t,e)=>(this.test(e)||t.push(e),t)),[])}}const qr=(t,e,r)=>{if(Ge(e)||!He(e))return t;let n=Me;const o=r.collation;return He(o)&&Be(o.locale)&&(n=function(t){const e={sensitivity:zr[t.strength||3],caseFirst:"off"===t.caseFirst?"false":t.caseFirst||"false",numeric:t.numericOrdering||!1,ignorePunctuation:"shifted"===t.alternate};!0===(t.caseLevel||!1)&&("base"===e.sensitivity&&(e.sensitivity="case"),"accent"===e.sensitivity&&(e.sensitivity="variant"));const r=new Intl.Collator(t.locale,e);return(t,e)=>{if(!Be(t)||!Be(e))return Me(t,e);const n=r.compare(t,e);return n<0?-1:n>0?1:0}}(o)),t.transform((t=>{const o=Object.keys(e);for(const i of o.reverse()){const o=fr(t,(t=>dr(t,i)),r.hashFunction),a=Array.from(o.keys()).sort(n);-1===e[i]&&a.reverse(),t=[],a.reduce(((t,e)=>hr(t,o.get(e))),t)}return t}))},zr={1:"base",2:"accent",3:"variant"};function Kr(t){const e=(e,r,n)=>{const o={unwrapArray:!0},i=Math.max(1,e.split(".").length-1);return a=>{const s=dr(a,e,o);return t(s,r,{...n,depth:i})}};return e.op="query",e}function Vr(t){return(e,r,n)=>{const o=Nr(e,r,null,n);return t(...o)}}function Gr(t,e,r){if(sr(t,e))return!0;if(ze(t)&&ze(e))return!0;if(t instanceof Array){const n=sr.bind(null,e);return t.some(n)||ar(t,r?.depth).some(n)}return!1}function Jr(t,e,r){return!Gr(t,e,r)}function Qr(t,e,r){return ze(t)?e.some((t=>null===t)):ir([Qe(t),e],r?.hashFunction).length>0}function Yr(t,e,r){return!Qr(t,e,r)}function Xr(t,e,r){return ln(t,e,((t,e)=>Me(t,e)<0))}function Zr(t,e,r){return ln(t,e,((t,e)=>Me(t,e)<=0))}function tn(t,e,r){return ln(t,e,((t,e)=>Me(t,e)>0))}function en(t,e,r){return ln(t,e,((t,e)=>Me(t,e)>=0))}function rn(t){return Or(t)&&-1===["$and","$or","$nor"].indexOf(t)}function nn(t,e,r){if(Ce(t)&&!Ge(t)){let n=t=>t,o=e;Object.keys(e).every(rn)&&(o={temp:e},n=t=>({temp:t}));const i=new Wr(o,r);for(let e=0,r=t.length;e<r;e++)if(i.test(n(t[e])))return!0}return!1}const on=t=>null===t,an=t=>De(t)&&t>=-2147483648&&t<=2147483647&&-1===t.toString().indexOf("."),sn=t=>De(t)&&t>=Ae&&t<=Ee&&-1===t.toString().indexOf("."),cn={array:Ce,bool:Fe,boolean:Fe,date:Le,decimal:De,double:De,int:an,long:sn,number:De,null:on,object:He,regex:We,regexp:We,string:Be,undefined:ze,function:t=>{throw new je("unsupported type key `function`.")},1:De,2:Be,3:He,4:Ce,6:ze,8:Fe,9:Le,10:on,11:We,16:an,18:sn,19:De};function un(t,e,r){const n=cn[e];return!!n&&n(t)}function ln(t,e,r){return Qe(t).some((t=>Ne(t)===Ne(e)&&r(t,e)))}Vr(Yr);const fn=(t,e)=>(r,n,o)=>{Te(Ce(n),`${t}: expression must be an array.`);const i=Nr(r,n,null,o);return i.some(ze)?null:(Te(i.every(De),`${t}: expression must evalue to array of numbers.`),e(i))};fn("$bitAnd",(t=>t.reduce(((t,e)=>t&e),-1))),fn("$bitOr",(t=>t.reduce(((t,e)=>t|e),0))),fn("$bitXor",(t=>t.reduce(((t,e)=>t^e),0))),Vr(Gr),Vr(tn),Vr(en),Vr(Xr),Vr(Zr),Vr(Jr);const pn=(t,e)=>{const r={};return t.split("").forEach(((t,n)=>r[t]=e*(n+1))),r};pn("ABCDEFGHIKLM",1),pn("NOPQRSTUVWXY",-1);const hn={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function yn(t,e=hn){const r=Object.assign({},hn,e),n=new Set(Object.keys(r));return(e,o,i)=>{const a=Nr(e,o,null,i);if(n.has(`${a}`)){const e=r[`${a}`];if(e instanceof Error)throw new je(`cannot apply $${t.name} to -inf, value must in (-inf,inf)`);return e}return t(a)}}yn(Math.acos,{Infinity:1/0,0:new Error}),yn(Math.acosh,{Infinity:1/0,0:new Error}),yn(Math.asin),yn(Math.asinh,{Infinity:1/0,"-Infinity":-1/0}),yn(Math.atan),yn(Math.atanh,{1:1/0,"-1":-1/0}),yn(Math.cos),yn(Math.cosh,{"-Infinity":1/0,Infinity:1/0});const dn=Math.PI/180,gn=(yn((t=>t*dn),{Infinity:1/0,"-Infinity":1/0}),180/Math.PI);yn((t=>t*gn),{Infinity:1/0,"-Infinity":-1/0}),yn(Math.sin),yn(Math.sinh,{"-Infinity":-1/0,Infinity:1/0}),yn(Math.tan);const vn=(t,e,r)=>{if(Ge(e))return t;let n=Object.keys(e),o=!1;bn(e,r);const i=r.idKey;if(Ke(n,i)){const t=e[i];0!==t&&!1!==t||(n=n.filter(Ve.bind(null,[i])),o=0==n.length)}else n.push(i);const a=Ar.init(r);return t.map((t=>mn(t,e,a.update(t),n,o)))};function mn(t,e,r,n,o){let i={},a=!1,s=!1;const c=[];o&&c.push(r.idKey);for(const o of n){let n;const u=e[o];if(o!==r.idKey&&Ke([0,!1],u)&&(s=!0),o===r.idKey&&Ge(u))n=t[o];else if(Be(u))n=Nr(t,u,o,r);else if(Ke([1,!0],u));else if(u instanceof Array)n=u.map((e=>{const n=Nr(t,e,null,r);return ze(n)?null:n}));else{if(!He(u)){c.push(o);continue}{const e=u,i=Object.keys(u),s=1==i.length?i[0]:"",c=$r(Pr.PROJECTION,s,r);if(c)"$slice"===s?Qe(e[s]).every(De)?(n=c(t,e[s],o,r),a=!0):n=Nr(t,e,o,r):n=c(t,e[s],o,r);else if(Or(s))n=Nr(t,e[s],s,r);else if(Ye(t,o)){bn(e,r);let a=t[o];a instanceof Array?n=a.map((t=>mn(t,e,r,i,!1))):(a=He(a)?a:t,n=mn(a,e,r,i,!1))}else n=Nr(t,u,null,r)}}const l=gr(t,o,{preserveMissing:!0});void 0!==l&&nr(i,l,{flatten:!0}),Ve([0,1,!1,!0],u)&&(void 0===n?Sr(i,o,{descendArray:!0}):wr(i,o,n))}if(vr(i),(a||s||o)&&(i=hr({},t,i),c.length>0))for(const t of c)Sr(i,t,{descendArray:!0});return i}function bn(t,e){const r=[!1,!1];for(const[n,o]of Object.entries(t)){if(n===e?.idKey)return;0===o||!1===o?r[0]=!0:1!==o&&!0!==o||(r[1]=!0),Te(!(r[0]&&r[1]),"Projection cannot have a mix of inclusion and exclusion.")}}const wn=(t,e,r)=>{Te(Ce(e),"Invalid expression: $and expects value to be an Array.");const n=e.map((t=>new Wr(t,r)));return t=>n.every((e=>e.test(t)))},Sn=(t,e,r)=>{Te(Ce(e),"Invalid expression. $or expects value to be an Array");const n=e.map((t=>new Wr(t,r)));return t=>n.some((e=>e.test(t)))},xn=(t,e,r)=>{Te(Ce(e),"Invalid expression. $nor expects value to be an array.");const n=Sn("$or",e,r);return t=>!n(t)},On=(t,e,r)=>{const n={};n[t]=jr(e);const o=new Wr(n,r);return t=>!o.test(t)},jn=Kr(Gr),En=Kr(tn),An=Kr(en),_n=Kr(Qr),Pn=Kr(Xr),In=Kr(Zr),kn=Kr(Jr),Rn=Kr(Yr),$n=Kr((function(t,e,r){return Qe(t).some((t=>2===e.length&&t%e[0]===e[1]))})),Mn=Kr((function(t,e,r){const n=Qe(t),o=t=>Be(t)&&((t,e=!0)=>!!t||e&&""===t)(e.exec(t),r?.useStrictMode);return n.some(o)||ar(n,1).some(o)}));Kr((function(t,e,r){if(!(Ce(t)&&Ce(e)&&t.length&&e.length))return!1;let n=!0;for(const o of e){if(!n)break;n=He(o)&&Ke(Object.keys(o),"$elemMatch")?nn(t,o.$elemMatch,r):o instanceof RegExp?t.some((t=>"string"==typeof t&&o.test(t))):t.some((t=>sr(o,t)))}return n}));const Tn=Kr(nn),Nn=Kr((function(t,e,r){return Array.isArray(t)&&t.length===e})),Fn=Kr((function(t,e,r){return(!1===e||0===e)&&void 0===t||(!0===e||1===e)&&void 0!==t})),Bn=Kr((function(t,e,r){return Array.isArray(e)?e.findIndex((e=>un(t,e)))>=0:un(t,e)}));var Dn=!1;function Cn(t,e){var r=w(t.primaryKey);e=l(e);var n=f(e);if("number"!=typeof n.skip&&(n.skip=0),n.selector?(n.selector=n.selector,Object.entries(n.selector).forEach((([t,e])=>{"object"==typeof e&&null!==e||(n.selector[t]={$eq:e})}))):n.selector={},n.index){var o=h(n.index);o.includes(r)||o.push(r),n.index=o}if(n.sort){var i=n.sort.find((t=>{return e=t,Object.keys(e)[0]===r;var e}));i||(n.sort=n.sort.slice(0),n.sort.push({[r]:"asc"}))}else if(n.index)n.sort=n.index.map((t=>({[t]:"asc"})));else{if(t.indexes){var a=new Set;Object.entries(n.selector).forEach((([t,e])=>{("object"!=typeof e||null===e||Object.keys(e).find((t=>K.has(t))))&&a.add(t)}));var s,c=-1;t.indexes.forEach((t=>{var e=y(t)?t:[t],r=e.findIndex((t=>!a.has(t)));r>0&&r>c&&(c=r,s=e)})),s&&(n.sort=s.map((t=>({[t]:"asc"}))))}n.sort||(n.sort=[{[r]:"asc"}])}return n}function Hn(t,e){if(!e.sort)throw L("SNH",{query:e});var r,n=(r=e.selector,Dn||(Rr(Pr.PIPELINE,{$sort:qr,$project:vn}),Rr(Pr.QUERY,{$and:wn,$eq:jn,$elemMatch:Tn,$exists:Fn,$gt:En,$gte:An,$in:_n,$lt:Pn,$lte:In,$ne:kn,$nin:Rn,$mod:$n,$nor:xn,$not:On,$or:Sn,$regex:Mn,$size:Nn,$type:Bn}),Dn=!0),new Wr(r));return t=>n.test(t)}function Un(t){return{previous:t.previous,document:Wn(t.document)}}function Ln(t){var e,r=t.data;return r?{length:(e=r,atob(e).length),digest:t.digest,type:t.type}:t}function Wn(t){if(!t._attachments||0===Object.keys(t._attachments).length)return t;var e=l(t);return e._attachments={},Object.entries(t._attachments).forEach((([t,r])=>{e._attachments[t]=Ln(r)})),e}var qn=new WeakMap;async function zn(t,e,r){if(t.getChangedDocumentsSince)return t.getChangedDocumentsSince(e,r);var n=w(t.schema.primaryKey),o=Oe(t.schema,function(t,e,r){var n=w(t.schema.primaryKey),o=r?r.lwt:m,i=r?r.id:"";return Cn(t.schema,{selector:{$or:[{"_meta.lwt":{$gt:o}},{"_meta.lwt":{$eq:o},[n]:{$gt:r?i:""}}],"_meta.lwt":{$gte:o}},sort:[{"_meta.lwt":"asc"},{[n]:"asc"}],skip:0,limit:e})}(t,e,r)),i=(await t.query(o)).documents,a=p(i);return{documents:i,checkpoint:a?{id:a[n],lwt:a._meta.lwt}:r||{id:"",lwt:0}}}function Kn(t,e,r){var n=qn.get(r);if(n)return n;var o=[];if(r.error.length>0){for(var i=new Set,a=0;a<r.error.length;a++){var s=r.error[a];i.add(s.documentId)}for(var c=0;c<e.length;c++){var u=e[c].document;i.has(u[t])||o.push(Wn(u))}}else{o.length=e.length-r.error.length;for(var l=0;l<e.length;l++){var f=e[l].document;o[l]=Wn(f)}}return o}var Vn="15.30.2",Gn={now:function(){return(Gn.delegate||Date).now()},delegate:void 0},Jn=function(t){function e(e,r,n){void 0===e&&(e=1/0),void 0===r&&(r=1/0),void 0===n&&(n=Gn);var o=t.call(this)||this;return o._bufferSize=e,o._windowTime=r,o._timestampProvider=n,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=r===1/0,o._bufferSize=Math.max(1,e),o._windowTime=Math.max(1,r),o}return _t(e,t),e.prototype.next=function(e){var r=this,n=r.isStopped,o=r._buffer,i=r._infiniteTimeWindow,a=r._timestampProvider,s=r._windowTime;n||(o.push(e),!i&&o.push(a.now()+s)),this._trimBuffer(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var e=this._innerSubscribe(t),r=this._infiniteTimeWindow,n=this._buffer.slice(),o=0;o<n.length&&!t.closed;o+=r?1:2)t.next(n[o]);return this._checkFinalizedStatuses(t),e},e.prototype._trimBuffer=function(){var t=this,e=t._bufferSize,r=t._timestampProvider,n=t._buffer,o=t._infiniteTimeWindow,i=(o?1:2)*e;if(e<1/0&&i<n.length&&n.splice(0,n.length-i),!o){for(var a=r.now(),s=0,c=1;c<n.length&&n[c]<=a;c+=2)s=c;s&&n.splice(0,s+1)}},e}(pe),Qn=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t},Yn="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Xn(t){if(t instanceof ue)return t;if(null!=t){if(function(t){return Ft(t[ae])}(t))return i=t,new ue((function(t){var e=i[ae]();if(Ft(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(Qn(t))return o=t,new ue((function(t){for(var e=0;e<o.length&&!t.closed;e++)t.next(o[e]);t.complete()}));if(Ft(null==(n=t)?void 0:n.then))return r=t,new ue((function(t){r.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,Kt)}));if(function(t){return Symbol.asyncIterator&&Ft(null==t?void 0:t[Symbol.asyncIterator])}(t))return Zn(t);if(function(t){return Ft(null==t?void 0:t[Yn])}(t))return e=t,new ue((function(t){var r,n;try{for(var o=kt(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(t.next(a),t.closed)return}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}t.complete()}));if(function(t){return Ft(null==t?void 0:t.getReader)}(t))return Zn(function(t){return Tt(this,arguments,(function(){var e,r,n;return It(this,(function(o){switch(o.label){case 0:e=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Mt(e.read())];case 3:return r=o.sent(),n=r.value,r.done?[4,Mt(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Mt(n)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))}(t))}var e,r,n,o,i;throw function(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(t)}function Zn(t){return new ue((function(e){(function(t,e){var r,n,o,i;return Pt(this,void 0,void 0,(function(){var a,s;return It(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),r=Nt(t),c.label=1;case 1:return[4,r.next()];case 2:if((n=c.sent()).done)return[3,4];if(a=n.value,e.next(a),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),o={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}}))}))})(t,e).catch((function(t){return e.error(t)}))}))}function to(t){return function(e){if(function(t){return Ft(null==t?void 0:t.lift)}(e))return e.lift((function(e){try{return t(e,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}function eo(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(!0!==e){if(!1!==e){var o=new re({next:function(){o.unsubscribe(),t()}});return Xn(e.apply(void 0,$t([],Rt(r)))).subscribe(o)}}else t()}function ro(t,e,r){var n,o,i,a,s=!1;return t&&"object"==typeof t?(n=t.bufferSize,a=void 0===n?1/0:n,o=t.windowTime,e=void 0===o?1/0:o,s=void 0!==(i=t.refCount)&&i,r=t.scheduler):a=null!=t?t:1/0,function(t){void 0===t&&(t={});var e=t.connector,r=void 0===e?function(){return new pe}:e,n=t.resetOnError,o=void 0===n||n,i=t.resetOnComplete,a=void 0===i||i,s=t.resetOnRefCountZero,c=void 0===s||s;return function(t){var e,n,i,s=0,u=!1,l=!1,f=function(){null==n||n.unsubscribe(),n=void 0},p=function(){f(),e=i=void 0,u=l=!1},h=function(){var t=e;p(),null==t||t.unsubscribe()};return to((function(t,y){s++,l||u||f();var d=i=null!=i?i:r();y.add((function(){0!=--s||l||u||(n=eo(h,c))})),d.subscribe(y),!e&&s>0&&(e=new re({next:function(t){return d.next(t)},error:function(t){l=!0,f(),n=eo(p,o,t),d.error(t)},complete:function(){u=!0,f(),n=eo(p,a),d.complete()}}),Xn(t).subscribe(e))}))(t)}}({connector:function(){return new Jn(a,e,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}var no=new TextDecoder,oo=new TextEncoder;async function io(t,e,r,n){var o=[],i=function(t,e){t=t.slice(0);for(var r=[];t.length;){var n=t.splice(0,e);r.push(n)}return r}(n,1e3);return await Promise.all(i.map((async n=>{var i=await so(t,e,r,n),a=JSON.parse(i);0===o.length?o=a:v(o,a)}))),o}var ao=oo.encode(",");async function so(t,e,r,n){await async function(t,e,r,n){if(!e.wholeDocumentsFileContent&&.15*me(t)<n&&me(t)>1){var o=await r.read(0);e.wholeDocumentsFileContent=o}}(t,r,e,n.length);var o=n.length,i=r.wholeDocumentsFileContent;if(i){for(var a="",s=0;s<o;s++){var c=n[s];a+=no.decode(i.slice(c[2],c[3])),s!==o-1&&(a+=",")}return"["+a+"]"}var u=new Map,l=function(t,e){for(var r=t.slice(0).sort(co),n=function(t,e){var r=[];if(t.length>=e)r=t.slice();else for(;r.length<e;){var n=uo(t);r.push(n)}var o=0;return r.forEach((t=>o+=t[3]-t[2])),o/r.length}(t,5),o=[],i=[],a=0;a<r.length;a++){var s=r[a];if(0!==i.length){var c=p(i);s[2]-c[3]<e*n?i.push(s):(o.push(i),i=[s])}else i.push(s)}return i.length>0&&o.push(i),o}(n,25),f=o-1;await Promise.all(l.map((async t=>{var r=await async function(t,e,r){for(var n=e[0][2],o=O(p(e))[3],i=await t.read(n,o),a=0,s=0;s<e.length;s++){var c=e[s],u=i.slice(c[2]-n,c[3]-n);a+=u.byteLength,r.set(c,u)}return a}(e,t,u);f+=r})));for(var h=new Uint8Array(f),y=0,d=0;d<o;d++){var g=n[d],v=I(u,g);h.set(v,y),y+=v.byteLength,d!==o-1&&(h.set(ao,y),y+=ao.byteLength)}return"["+no.decode(h)+"]"}function co(t,e){return t[2]<e[2]?-1:t[2]>e[2]?1:0}function uo(t){return t[Math.floor(Math.random()*t.length)]}Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0}),Object.freeze(["prototype","__proto__","constructor"]);class lo{constructor(t,e){t=this.words=t||[],this.sigBytes=void 0===e?4*t.length:e}toString(t){return(t||fo).stringify(this)}concat(t){if(this.clamp(),this.sigBytes%4)for(let e=0;e<t.sigBytes;e++){const r=t.words[e>>>2]>>>24-e%4*8&255;this.words[this.sigBytes+e>>>2]|=r<<24-(this.sigBytes+e)%4*8}else for(let e=0;e<t.sigBytes;e+=4)this.words[this.sigBytes+e>>>2]=t.words[e>>>2];return this.sigBytes+=t.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new lo([...this.words])}}const fo={stringify(t){const e=[];for(let r=0;r<t.sigBytes;r++){const n=t.words[r>>>2]>>>24-r%4*8&255;e.push((n>>>4).toString(16),(15&n).toString(16))}return e.join("")}},po={parse(t){const e=t.length,r=[];for(let n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new lo(r,e)}},ho={parse:t=>po.parse(unescape(encodeURIComponent(t)))};class yo{constructor(){this._data=new lo,this._nDataBytes=0,this._minBufferSize=0,this.blockSize=16}reset(){this._data=new lo,this._nDataBytes=0}_append(t){"string"==typeof t&&(t=ho.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_doProcessBlock(t,e){}_process(t){let e,r=this._data.sigBytes/(4*this.blockSize);r=t?Math.ceil(r):Math.max((0|r)-this._minBufferSize,0);const n=r*this.blockSize,o=Math.min(4*n,this._data.sigBytes);if(n){for(let t=0;t<n;t+=this.blockSize)this._doProcessBlock(this._data.words,t);e=this._data.words.splice(0,n),this._data.sigBytes-=o}return new lo(e,o)}}class go extends yo{update(t){return this._append(t),this._process(),this}finalize(t){t&&this._append(t)}}const vo=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],mo=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],bo=[];class wo extends go{constructor(){super(...arguments),this._hash=new lo([...vo])}reset(){super.reset(),this._hash=new lo([...vo])}_doProcessBlock(t,e){const r=this._hash.words;let n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],c=r[5],u=r[6],l=r[7];for(let r=0;r<64;r++){if(r<16)bo[r]=0|t[e+r];else{const t=bo[r-15],e=(t<<25|t>>>7)^(t<<14|t>>>18)^t>>>3,n=bo[r-2],o=(n<<15|n>>>17)^(n<<13|n>>>19)^n>>>10;bo[r]=e+bo[r-7]+o+bo[r-16]}const f=n&o^n&i^o&i,p=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),h=l+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&c^~s&u)+mo[r]+bo[r];l=u,u=c,c=s,s=a+h|0,a=i,i=o,o=n,n=h+(p+f)|0}r[0]=r[0]+n|0,r[1]=r[1]+o|0,r[2]=r[2]+i|0,r[3]=r[3]+a|0,r[4]=r[4]+s|0,r[5]=r[5]+c|0,r[6]=r[6]+u|0,r[7]=r[7]+l|0}finalize(t){super.finalize(t);const e=8*this._nDataBytes,r=8*this._data.sigBytes;return this._data.words[r>>>5]|=128<<24-r%32,this._data.words[14+(r+64>>>9<<4)]=Math.floor(e/4294967296),this._data.words[15+(r+64>>>9<<4)]=e,this._data.sigBytes=4*this._data.words.length,this._process(),this._hash}}var So="undefined"!=typeof crypto&&void 0!==crypto.subtle&&"function"==typeof crypto.subtle.digest?async function(t){var e=(new TextEncoder).encode(t),r=await crypto.subtle.digest("SHA-256",e);return Array.prototype.map.call(new Uint8Array(r),(t=>("00"+t.toString(16)).slice(-2))).join("")}:function(t){return Promise.resolve((e=t,(new wo).finalize(e).toString()));var e};async function xo(t,e,r){return"z-attachment-"+(await So(t+"||"+e)).slice(0,20)+"-"+r.slice(0,20)+".txt"}async function Oo(t,e,r,o){var i,a=e.primaryPath,s=!!e.schema.attachments,c=await e.internals.statePromise,u=P(c.changesFileHandle,t).then((t=>t.getWritable())),l=r.map((t=>t.document[a])),f=me(c)>0?await async function(t,e,r){var n=new Map,o=await t.internals.statePromise;if(0===me(o))return n;for(var i=P(o.documentFileHandle,r),a=O(o.indexStates[0].metaIdMap),s=[],c=e.length,u=0;u<c;u++){var l=e[u],f=a.get(l);f&&s.push(f)}if(0===s.length)return n;for(var p=await i,h=await io(o,p,r,s),y=s.length,d=0;d<y;d++){var g=h[d],v=s[d][1];n.set(v,g)}return n}(e,l,t):new Map,p=function(t,e,r,o,i,a,s){for(var c,u=!!t.schema.attachments,l=[],f=[],p=[],h={id:n(10),events:[],checkpoint:null,context:i,startTime:xe(),endTime:0},y=h.events,d=[],g=[],v=[],m=r.size>0,b=o.length,w=function(){var t,n=o[S],i=n.document,h=n.previous,b=i[e],w=i._deleted,x=h&&h._deleted,j=void 0;if(m&&(j=r.get(b)),j){var E=j._rev;if(!h||h&&E!==h._rev){var A={isError:!0,status:409,documentId:b,writeRow:n,documentInDb:j};return p.push(A),1}var _=u?Un(n):n;u&&(w?h&&Object.keys(h._attachments).forEach((t=>{g.push({documentId:b,attachmentId:t,digest:O(h)._attachments[t].digest})})):(Object.entries(i._attachments).find((([e,r])=>((h?h._attachments[e]:void 0)||r.data||(t={documentId:b,documentInDb:j,isError:!0,status:510,writeRow:n,attachmentId:e}),!0))),t||Object.entries(i._attachments).forEach((([t,e])=>{var r=h?h._attachments[t]:void 0;if(r){var n=_.document._attachments[t].digest;e.data&&r.digest!==n&&v.push({documentId:b,attachmentId:t,attachmentData:e,digest:e.digest})}else d.push({documentId:b,attachmentId:t,attachmentData:e,digest:e.digest})})))),t?p.push(t):(u?(f.push(Un(_)),s&&s(i)):(f.push(_),s&&s(i)),c=_);var P=null,I=null,k=null;if(x&&!w)k="INSERT",P=u?Wn(i):i;else if(!h||x||w){if(!w)throw L("SNH",{args:{writeRow:n}});k="DELETE",P=O(i),I=h}else k="UPDATE",P=u?Wn(i):i,I=h;var R={documentId:b,documentData:P,previousDocumentData:I,operation:k};y.push(R)}else{var $=!!w;if(u&&Object.entries(i._attachments).forEach((([e,r])=>{r.data?d.push({documentId:b,attachmentId:e,attachmentData:r,digest:r.digest}):(t={documentId:b,isError:!0,status:510,writeRow:n,attachmentId:e},p.push(t))})),t||(u?(l.push(Un(n)),a&&a(i)):(l.push(n),a&&a(i)),c=n),!$){var M={documentId:b,operation:"INSERT",documentData:u?Wn(i):i,previousDocumentData:u&&h?Wn(h):h};y.push(M)}}},S=0;S<b;S++)w();return{bulkInsertDocs:l,bulkUpdateDocs:f,newestRow:c,errors:p,eventBulk:h,attachmentsAdd:d,attachmentsRemove:g,attachmentsUpdate:v}}(e,a,f,r,o),h=p.eventBulk.events;if(i=p.errors,h.length>0){var y=O(p.newestRow).document;O(y),p.eventBulk.checkpoint={id:y[a],lwt:y._meta.lwt},c.mightHaveUnprocessedChanges=!0,c.broadcastChannel&&c.broadcastChannel.postMessage({type:"pre-write",mightHaveUnprocessedChanges:!0}),s&&await async function(t,e,r,n){if(e.schema.attachments){var o=r.attachmentsAdd.concat(r.attachmentsUpdate);0!==o.length&&await Promise.all(o.map((async e=>{var r=await xo(e.documentId,e.attachmentId,Ln(e.attachmentData).digest),o=await n.dirHandle.getFileHandle(r,{create:!0}),i=await P(o,t);await i.truncate(0);var a=oo.encode(e.attachmentData.data),s=await i.getWritable();await s.write(a,{at:0}),s.flush&&await s.flush(),await s.close()})))}}(t,e,p,c),p.eventBulk.endTime=xe();var d=JSON.stringify(p.eventBulk),g=oo.encode(d),v=await u,m=v.write(g,{at:0});e.changes$.next(d),t.awaitBeforeFinish.push((()=>jo(t,c,e,!0))),await m,v.flush&&await v.flush()}return{error:i}}async function jo(t,e,r,n=!1){if(e.mightHaveUnprocessedChanges){var o=await P(e.changesFileHandle,t),i=await o.getSize();if(0!==i){var a=await o.read(0,i),s=no.decode(a),c=JSON.parse(s),u=c.events,l=await P(e.documentFileHandle,t),f=await async function(t,e,r){for(var n=[],o=await P(e,t),i=await o.getSize(),a=[],s=0,c=i,u=r.length,l=0;l<u;l++){var f=r[l].documentData,p=JSON.stringify(f),h=c,y=oo.encode(p);a.push(y);var d=y.byteLength;s+=d;var g=c+=d;n.push([h,g])}for(var v=new Uint8Array(s),m=0,b=0;b<a.length;b++){var w=a[b];v.set(w,m),m+=w.byteLength}var S=await o.getWritable();return await S.write(v,{at:i}),n}(t,e.documentFileHandle,u);await l.close(),await async function(t,e,r,n){if(e.schema.attachments){var o=[];n.events.forEach((t=>{t.previousDocumentData&&Object.keys(t.previousDocumentData._attachments).forEach((e=>{t.documentData._attachments[e]&&!t.documentData._deleted||o.push({documentId:t.documentId,attachmentId:e,digest:O(t.previousDocumentData)._attachments[e].digest})}))})),0!==o.length&&await Promise.all(o.map((async t=>{var e=await xo(t.documentId,t.attachmentId,t.digest),n=await r.dirHandle.getFileHandle(e,{create:!0});await r.dirHandle.removeEntry(n.name)})))}}(0,r,e,c),n||r.changes$.next(c);for(var p=[],h=0;h<e.indexStates.length;h++)e.indexStates[h].appendWriteOperations(u,f,p);await Et(t,e.changelogFile,p,e.maxIndexableStringLength),we(r,e,p,c),await o.truncate(0),e.mightHaveUnprocessedChanges=!1,e.broadcastChannel&&e.broadcastChannel.postMessage({type:"pre-write",mightHaveUnprocessedChanges:!1})}else e.mightHaveUnprocessedChanges=!1}}async function Eo(t,e,r){var n=await t.internals.statePromise,o=e.queryPlan.index.slice(0),i=at(o),a=O(n.indexStates.find((t=>t.name===i)));if(0===a.rows.length)return{documents:[]};var s=e.queryPlan,c=e.query,l=c.skip?c.skip:0,f=l+(c.limit?c.limit:1/0),p=!1;s.selectorSatisfiedByIndex||(p=Hn(t.schema,e.query));var h=!s.sortSatisfiedByIndex,y=s.startKeys,d=tt(t.schema,o,y),g=s.endKeys,v=et(t.schema,o,g),m=(s.inclusiveStart?yt:dt)(a.rows,[d],be),b=(s.inclusiveEnd?vt:gt)(a.rows,[v],be),w=await P(n.documentFileHandle,r),S=[];if(p)for(var x=!1;!x;){var j=a.rows[m];if(!j||m>b)break;var E=(await io(n,w,r,[j]))[0];p(E)&&S.push(E),(S.length>=f&&!h||m>=a.rows.length)&&(x=!0),m++}else{for(var A=[],_=!1;!_;){var I=a.rows[m];if(!I||m>b)break;A.push(I),(S.length>=f&&!h||m>=a.rows.length)&&(_=!0),m++}if(!h){var k=(A=A.slice(l,f)).length>0?await so(n,w,r,A):"[]";return Promise.resolve('{"documents": '+k+"}")}S=await io(n,w,r,A)}if(h){var R=function(t,e){if(!e.sort)throw L("SNH",{query:e});var r=[];return e.sort.forEach((t=>{var e=Object.keys(t)[0],n=Object.values(t)[0];r.push({key:e,direction:n,getValueFn:u(e)})})),(t,e)=>{for(var n=0;n<r.length;++n){var o=r[n],i=o.getValueFn(t),a=o.getValueFn(e);if(i!==a)return"asc"===o.direction?Me(i,a):Me(a,i)}}}(t.schema,e.query);S=S.sort(R)}return S=S.slice(l,f),Promise.resolve({documents:S})}var Ao=at(st);async function _o(t,e,r){var n=await async function(t,e,r){var n=await t.internals.statePromise,o=O(n.indexStates.find((t=>t.name===Ao))),i=xe()-r,a=tt(t.schema,st,[!0,1]),s=et(t.schema,st,[!0,i]),c=dt(o.rows,[a],be),u=gt(o.rows,[s],be);if(-1===c)return[];var l=o.rows.slice(c,u+1),f=[],p=await P(n.documentFileHandle,e);for(var h of l){var y=h[1];f.push(y);var d=(await io(n,p,e,[h]))[0],g=[];for(var v of n.indexStates){var m=v.getIndexableString(d),b=mt(v.rows,[m],be),w=[v.indexId,b,"D",v.rows[b]];g.push(w),v.runChangelogOperation(w)}await Et(e,n.changelogFile,g,n.maxIndexableStringLength)}return f}(t,e,r);if(n.length>0)return!1;var o=await async function(t,e){var r=await t.internals.statePromise,n=await jt(e,r.changelogFile,r.indexStates,0),o=r.indexStates.filter((t=>{var e=n.operationsByIndexId.get(t.indexId);return!(!e||0===e.length)}));for(var i of o)await i.indexFile.replaceContent(e,i.rows.map((t=>[t[0],t[2],t[3]])));return o.length>0&&await r.changelogFile.empty(e),o}(t,e);if(o.length>0)return!1;var i=await async function(t,e){var r=await t.internals.statePromise,n=O(r.indexStates.find((t=>"_meta.lwt"===t.index[0])));if(!p(n.rows))return 0;var o=await P(r.documentFileHandle,e),i=await o.getSize();r.broadcastChannel&&r.broadcastChannel.postMessage({type:"pre-write",mightHaveUnprocessedChanges:!0});for(var a=50,s=0,c=0,u=0;;){if(c>=a)return c;var l=n.rows[u];if(u+=1,!l)return s<i&&await o.truncate(s),c;var f=l[2],h=l[3];if(f===s)s=h;else{c+=1;var y=(await io(r,o,e,[l]))[0],d=s,g=f-d,v=oo.encode(" ".repeat(g)),m=await o.getWritable();await m.write(v,{at:d});var b=[];for(var w of r.indexStates){var S=w.changeDocumentPosition(y,[d,h]);b.push(S)}await Et(e,r.changelogFile,b,r.maxIndexableStringLength),we(t,r,b);var x=JSON.stringify(y),j=x.length,E=oo.encode(x+" ".repeat(g-j));m=await o.getWritable(),await m.write(E,{at:d});var A=d+j,_=[];for(var I of r.indexStates){var k=I.changeDocumentPosition(y,[d,A]);_.push(k)}await Et(e,r.changelogFile,_,r.maxIndexableStringLength),we(t,r,_),s+=j}}}(t,e);return!(i>0)}var Po=r(6313);r.n(Po)();var Io=r(251);function ko(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"abcdefghijklmnopqrstuvwxyz",r="",n=0;n<t;n++)r+=e.charAt(Math.floor(Math.random()*e.length));return r}function Ro(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return Math.floor(Math.random()*(e-t+1))+t}async function $o(t){var e=-1;return await t.taskQueue.runRead((async r=>{var n=await t.internals.statePromise,o=await P(n.documentFileHandle,r);e=await o.getSize()})),e}function Mo(t={}){return Object.assign({key:ko(10),stringValue:"barfoo",numberValue:Ro(1,100),nes:{ted:ko(10)},list:[{stringValue:ko(5),numberValue:Ro(1,100)},{stringValue:ko(5),numberValue:Ro(1,100)}],_deleted:!1,_attachments:{},_meta:{lwt:xe()},_rev:"1-12080c42d471e3d2625e49dcca3b8e1a"},t)}r.n(Io)(),r(6450),r(8507);var To=xe(),No=function(){function t(t,e,r,n,o,i,a,s,c){this.changes$=new pe,this.instanceId=To++,this.readQueueEntries=[],this.storage=t,this.databaseName=e,this.collectionName=r,this.schema=n,this.internals=o,this.options=i,this.settings=a,this.databaseInstanceToken=s,this.jsonPositionSize=c,this.primaryPath=w(this.schema.primaryKey),this.taskQueue=o.taskQueue}var e=t.prototype;return e.bulkWrite=function(t,e){return this.taskQueue.runWrite((async r=>Oo(r,this,t,e)))},e.findDocumentsById=async function(t,e){return this.taskQueue.runRead((r=>async function(t,e,r,n){var o=await t.internals.statePromise;if(0===me(o))return"[]";for(var i=P(o.documentFileHandle,n),a=O(o.indexStates[0].metaIdMap),s=[],c=e.length,u=0;u<c;u++){var l=e[u],f=a.get(l);f&&(r||"0"===f[0][0])&&s.push(f)}if(0===s.length)return"[]";var p=await i;return await so(o,p,n,s)}(this,t,e,r)))},e.query=function(t){return this.taskQueue.runRead((async e=>Eo(this,t,e)))},e.count=async function(t){return t.queryPlan.selectorSatisfiedByIndex?this.taskQueue.runRead((async e=>{var r=await async function(t,e){var r=await t.internals.statePromise,n=at(e.queryPlan.index.slice(0)),o=O(r.indexStates.find((t=>t.name===n)));if(0===o.rows.length)return{count:0,mode:"fast"};for(var i=e.queryPlan,a=i.index,s=i.startKeys,c=tt(t.schema,a,s),u=i.endKeys,l=et(t.schema,a,u),f=(i.inclusiveStart?yt:dt)(o.rows,[c],be),p=(i.inclusiveEnd?vt:gt)(o.rows,[l],be),h=0;o.rows[f]&&!(f>p);)h+=1,f++;return{count:h,mode:"fast"}}(this,t);return r})):{count:(await this.query(t)).documents.length,mode:"slow"}},e.getAttachmentData=function(t,e,r){return this.taskQueue.runRead((async n=>async function(t,e,r,n,o){var i=await e.internals.statePromise,a=await xo(r,n,o),s=await i.dirHandle.getFileHandle(a,{create:!1}),c=await P(s,t),u=await c.read(0);return no.decode(u)}(n,this,t,e,r)))},e.getChangedDocumentsSince=function(t,e){return this.taskQueue.runRead((async r=>async function(t,e,r,n){n||(n={id:"",lwt:0});var o=await t.internals.statePromise,i=["_meta.lwt",t.primaryPath],a=at(i),s=O(o.indexStates.find((t=>t.name===a)));if(0===s.rows.length)return{documents:[],checkpoint:n};var c=[n.lwt,n.id],u=tt(t.schema,i,c),l=dt(s.rows,[u],be),f=await P(o.documentFileHandle,e),h=s.rows.slice(l,l+r),y=[];for(var d of h){var g=(await io(o,f,e,[d]))[0];y.push(g)}var v=p(y);return{documents:y,checkpoint:v?{id:v[t.primaryPath],lwt:v._meta.lwt}:n}}(this,r,t,e)))},e.changeStream=function(){return this.changes$.pipe(ro(j))},e.cleanup=function(t){return this.taskQueue.runWrite((async e=>await _o(this,e,t)))},e.close=async function(){return this.closed||(this.closed=(async()=>{var t=await this.internals.statePromise;await this.taskQueue.awaitIdle(),t.broadcastChannelMessages$.complete(),this.changes$.complete()})()),this.closed},e.remove=async function(){if(this.closed)throw new Error("instance is closed "+this.databaseName+"-"+this.collectionName);await this.taskQueue.awaitIdle(),await this.close(),await this.taskQueue.runWrite((async t=>{var e=await this.internals.statePromise,r=[e.documentFileHandle,e.changelogFile.fileHandle];for(var n of e.indexStates)r.push(n.fileHandle);await Promise.all(r.map((async e=>{var r=await e,n=await P(r,t);await n.truncate(0)})))}))},e.conflictResultionTasks=function(){return(new pe).asObservable()},e.resolveConflictResultionTask=function(t){return A},t}(),Fo=!1;async function Bo(t,e,r){!Fo&&e.devMode&&(Fo=!0,await async function(t,e){try{var r=new _("runBasicsTests",e),o=await t.getDirectory(),i=await o.getDirectoryHandle("basics-test",{create:!0}),a=new it(i.getFileHandle("check-file.txt",{create:!0}),100,[]),s=!1;if(await r.runWrite((async t=>{var e=await a.readHeader(t);e&&e.done&&(s=!0)})),s)return void console.log("dev-mode: runBasicsTests() HAS RUN ALREADY");console.log("dev-mode: runBasicsTests() START");var c=await i.getFileHandle("write-test.txt",{create:!0});console.log("dev-mode: runBasicsTests() 0.0");var u=await c.createAccessHandle();console.log("dev-mode: runBasicsTests() 0.1");var l=await u.getWritable();await l.write(oo.encode("1234567890"),{at:0}),console.log("dev-mode: runBasicsTests() 0.2"),console.log("dev-mode: runBasicsTests() 1");var p=await u.read(2,10);if("34567890"!==no.decode(p))throw new Error("wrong readBufferA "+no.decode(p));console.log("dev-mode: runBasicsTests() 2"),l=await u.getWritable(),await l.write(oo.encode("FOOBAR"),{at:4}),console.log("dev-mode: runBasicsTests() 3");var h=await u.read(0,10);if(console.log("dev-mode: runBasicsTests() 3.1"),"1234FOOBAR"!==no.decode(h))throw new Error("wrong readBuffer "+no.decode(h));console.log("dev-mode: runBasicsTests() 4"),await u.close(),console.log("dev-mode: runBasicsTests() 5");var y=new it(i.getFileHandle("one-file.txt",{create:!0}),0,[{type:"number",length:5},{type:"string",length:1},{type:"string",length:20}]),d=[[1,"A",de("foobar1",20)],[2,"B",de("foobar2",20)],[3,"C",de("foobar3",20)]];await r.runWrite((async t=>{await y.appendRows(t,d)})),await r.runRead((async t=>{var e=[];if(await y.readRows(t,0,(t=>e.push(t))),JSON.stringify(d)!==JSON.stringify(e))throw console.dir({writeRows:d,readRows:e}),new Error("rows not equal!")})),await r.runWrite((async t=>{await a.writeHeader(t,{done:!0})}));var g="runBasicsTests()";console.log("dev-mode: runBasicsTests() ENSURE CLEANUP WORKS 0");var v=Uo({name:"test",abstractFilesystem:t,abstractLock:e,jsonPositionSize:ge});console.log("dev-mode: runBasicsTests() ENSURE CLEANUP WORKS 1");var m=await v.createStorageInstance({databaseInstanceToken:n(10),databaseName:n(10),collectionName:n(10),schema:S({version:0,type:"object",primaryKey:"key",properties:{key:{type:"string",maxLength:50},stringValue:{type:"string",maxLength:50},numberValue:{type:"number",minimum:0,maximum:1e3,multipleOf:1},nes:{type:"object",properties:{ted:{type:"string",maxLength:10}},required:["ted"],additionalProperties:!1},list:{type:"array",items:{type:"object",additionalProperties:!1,properties:{stringValue:{type:"string",maxLength:50},numberValue:{type:"number",minimum:0,maximum:1e3,multipleOf:1}},required:["stringValue","numberValue"]}}},required:["key","stringValue","numberValue","nes","list"],indexes:[["stringValue"],["numberValue"],["numberValue","stringValue"]],additionalProperties:!1}),multiInstance:!1,options:{},devMode:!0});console.log("dev-mode: runBasicsTests() ENSURE CLEANUP WORKS 2"),await m.internals.statePromise,console.log("dev-mode: runBasicsTests() ENSURE CLEANUP WORKS 3"),await m.bulkWrite(new Array(2).fill(0).map(((t,e)=>({document:Mo({key:"a-"+e,list:[]})}))),g);var b=Mo({key:"foobar"});console.log("dev-mode: runBasicsTests() ENSURE CLEANUP WORKS 4");var w=[{document:b}],x=await m.bulkWrite(w,g);console.log("dev-mode: runBasicsTests() ENSURE CLEANUP WORKS 4.1");var O=Kn("key",w,x),j=f(O[0]);console.log("dev-mode: runBasicsTests() ENSURE CLEANUP WORKS 5"),await m.bulkWrite(new Array(2).fill(0).map(((t,e)=>({document:Mo({key:"b-"+e,list:[]})}))),g),console.log("dev-mode: runBasicsTests() ENSURE CLEANUP WORKS 6"),j._rev="2-22080c42d471e3d2625e49dcca3b8e2b",j._meta.lwt=xe(),await m.bulkWrite([{previous:b,document:j}],g),console.log("dev-mode: runBasicsTests() ENSURE CLEANUP WORKS 7");for(var A=await $o(m),P=!1;!P;)P=await m.cleanup(0);if(await $o(m)>=A)throw new Error("dev-mode: runBasicsTests() docs not cleaned up");await m.close()}catch(t){throw console.log("dev-mode: runBasicsTests() failed:"),console.dir(t),await E(1e7),t}console.log("dev-mode: runBasicsTests() DONE")}(t.abstractFilesystem,t.abstractLock));var o=function(t){return["rxdb","abstract-filesystem","task-queue-lock",t.databaseName,t.collectionName,t.schema.version].join("||")}(e),i=new _(o,t.abstractLock),a={taskQueue:i,statePromise:ye(t.abstractFilesystem,e,i,t.jsonPositionSize)},s=new No(t,e.databaseName,e.collectionName,e.schema,a,e.options,r,e.databaseInstanceToken,t.jsonPositionSize);return a.statePromise.then((t=>{i.beforeTaskReadOrWrite.push((e=>jo(e,t,s,!1)))})),a.statePromise.then((t=>{t.broadcastChannelMessages$.subscribe((async e=>{if("event"===e.type)e.changelogOperations.forEach((e=>{var r=e[0];t.indexStates[r].runChangelogOperation(e)})),e.eventBulk&&s.changes$.next(e.eventBulk);else{if("pre-write"!==e.type)throw new Error("BroadcastChannelMessageChanges$: unknown type "+e);t.mightHaveUnprocessedChanges=e.mightHaveUnprocessedChanges}}))})),s}function Do(t,e,r,n,o){return new Co(t,e,r,n,o)}var Co=function(t){function e(e,r,n,o,i,a){var s=t.call(this,e)||this;return s.onFinalize=i,s.shouldUnsubscribe=a,s._next=r?function(t){try{r(t)}catch(t){e.error(t)}}:t.prototype._next,s._error=o?function(t){try{o(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,s._complete=n?function(){try{n()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,s}return _t(e,t),e.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}},e}(Xt),Ho=function(){function t(t,e,r,n,o){this.rxdbVersion=Vn,this.name=t,this.abstractFilesystem=e,this.abstractLock=r,this.inWorker=n,this.jsonPositionSize=o}return t.prototype.createStorageInstance=async function(t){!function(t){if(t.schema.keyCompression)throw L("UT5",{args:{params:t}});if((e=t.schema).encrypted&&e.encrypted.length>0||e.attachments&&e.attachments.encrypted)throw L("UT6",{args:{params:t}});var e;if(t.schema.attachments&&t.schema.attachments.compression)throw L("UT7",{args:{params:t}})}(t);var e=await Bo(this,t,{});if(!this.inWorker){["findDocumentsById","query","bulkWrite"].forEach((t=>{var r=e[t].bind(e);e[t]=async(t,e,n,o,i)=>{var a=await r(t,e,n,o,i);return"string"==typeof a&&(a=JSON.parse(a)),a}}));var r=e.changeStream.bind(e);e.changeStream=()=>{return r().pipe((t=t=>("string"==typeof t&&(t=JSON.parse(t)),t),to((function(r,n){var o=0;r.subscribe(Do(n,(function(r){n.next(t.call(e,r,o++))})))}))));var t,e}}return e},t}();function Uo(t){return new Ho(t.name,t.abstractFilesystem,t.abstractLock,!!t.inWorker&&t.inWorker,t.jsonPositionSize?t.jsonPositionSize:ge)}var Lo=function(){function t(){this.opfsRootPromise=navigator.storage.getDirectory()}return t.prototype.getDirectory=async function(){var t=await this.opfsRootPromise;return new Wo(t)},t}(),Wo=function(){function t(t){this.baseDir=t}var e=t.prototype;return e.getDirectoryHandle=async function(e,r){return new t(await this.baseDir.getDirectoryHandle(e,r))},e.getFileHandle=async function(t,e){var r=await this.baseDir.getFileHandle(t,e);return new qo(t,r)},e.removeEntry=function(t){return this.baseDir.removeEntry(t)},t}(),qo=function(){function t(t,e){this.name=t,this.fileHandle=e}return t.prototype.createAccessHandle=async function(){return new zo(this)},t}(),zo=function(){function t(t){this.fileHandle=t,this.syncAccessHandlePromise=async function(t){if("function"!=typeof t.fileHandle.createSyncAccessHandle)throw new Error('Could not access fileHandle.createSyncAccessHandle(). Likely this is because this storage only works "inside dedicated Web Workers"');try{return await t.fileHandle.createSyncAccessHandle()}catch(t){throw t}}(this.fileHandle)}var e=t.prototype;return e.getHandle=function(){return this.syncAccessHandle||this.syncAccessHandlePromise.then((t=>(this.syncAccessHandle=t,t)))},e.getWritable=function(){return new Ko(this)},e.read=async function(t,e){var r=await this.getHandle();e||(e=await r.getSize());var n=new Uint8Array(e-t);return await r.read(n,{at:t}),n},e.truncate=async function(t){var e=await this.getHandle();await e.truncate(t)},e.getSize=async function(){return(await this.getHandle()).getSize()},e.close=async function(){var t=await this.getHandle();await t.close()},t}(),Ko=function(){function t(t){this.accessHandle=t}var e=t.prototype;return e.write=async function(t,e){var r=await this.accessHandle.getHandle();await r.write(t,e)},e.flush=async function(){var t=await this.accessHandle.getHandle();await t.flush()},e.close=async function(){var t=await this.accessHandle.getHandle();await t.close()},t}(),Vo="opfs";function Go(t,e){return to((function(r,n){var o=0;r.subscribe(Do(n,(function(r){return t.call(e,r,o++)&&n.next(r)})))}))}function Jo(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){if(t.constructor!==e.constructor)return!1;var r,n;if(Array.isArray(t)){if((r=t.length)!==e.length)return!1;for(n=r;0!=n--;)if(!Jo(t[n],e[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();var o=Object.keys(t);if((r=o.length)!==Object.keys(e).length)return!1;for(n=r;0!=n--;)if(!Object.prototype.hasOwnProperty.call(e,o[n]))return!1;for(n=r;0!=n--;){var i=o[n];if(!Jo(t[i],e[i]))return!1}return!0}return t!=t&&e!=e}function Qo(t,e){return{connectionId:t.connectionId,answerTo:t.requestId,method:t.method,error:(r=e,{name:r.name,message:r.message,rxdb:r.rxdb,parameters:r.parameters,extensions:r.extensions,code:r.code,url:r.url,stack:r.stack?r.stack.replace(/\n/g," \n "):void 0})};var r}function Yo(t,e){return{connectionId:t.connectionId,answerTo:t.requestId,method:t.method,return:e}}!function(t){var e;console.log("exposeWorkerRxStorage()");var r=new pe;if("undefined"!=typeof self&&"object"==typeof self.onconnect){var n=new Map;self.onconnect=t=>{var e=t.ports[0];e.onmessage=t=>{var o=t.data;n.set(o.connectionId,e),r.next(o)}},e={storage:t.storage,messages$:r,send(t){I(n,t.connectionId).postMessage(t)}}}else addEventListener("message",(t=>{var e=t.data;r.next(e)})),e={storage:t.storage,messages$:r,send(t){self.postMessage(t)}};!function(t){var e=new Map;function r(e){if(t.storage)return t.storage.createStorageInstance(e);if(t.database){var r=Array.from(t.database.storageInstances),n=e.collectionName,o=r.find((t=>t.collectionName===n));if(!o)throw console.dir(r),new Error("storageInstance does not exist "+JSON.stringify({collectionName:n}));var i=e.schema;if(!Jo(i,o.schema))throw new Error("Wrong schema "+JSON.stringify({schema:i,existingSchema:o.schema}));return Promise.resolve(o)}throw new Error("no base given")}t.messages$.pipe(Go((t=>"custom"===t.method))).subscribe((async e=>{if(t.customRequestHandler)try{var r=await t.customRequestHandler(e.params);t.send(Yo(e,r))}catch(r){t.send(Qo(e,r))}else t.send(Qo(e,new Error("Remote storage: cannot resolve custom request because settings.customRequestHandler is not set")))})),t.messages$.pipe(Go((t=>"create"===t.method))).subscribe((async n=>{var o=n.connectionId;if(!Array.isArray(n.params)){var i=n.params,a=i.collectionName,s=[i.databaseName,i.collectionName,i.schema.version].join("|"),c=e.get(s);if(c){if(!Jo(i.schema,c.params.schema))return void t.send(Qo(n,new Error("Remote storage: schema not equal to existing storage")))}else try{c={storageInstancePromise:r(i),connectionIds:new Set,params:i},e.set(s,c),await c.storageInstancePromise}catch(e){return void t.send(Qo(n,e))}c.connectionIds.add(n.connectionId);var u=[],l=await c.storageInstancePromise;u.push(l.changeStream().subscribe((e=>{var r={connectionId:o,answerTo:"changestream",method:"changeStream",return:e};t.send(r)}))),u.push(l.conflictResultionTasks().subscribe((e=>{var r={connectionId:o,answerTo:"conflictResultionTasks",method:"conflictResultionTasks",return:e};t.send(r)})));var f=!1;if(t.database){var p=t.database,h=p.collections[a];h?h.onDestroy.push((()=>y())):p.onDestroy.push((()=>y()))}u.push(t.messages$.pipe(Go((t=>t.connectionId===o))).subscribe((async e=>{var r,n=e;if("create"!==n.method&&"custom"!==n.method&&Array.isArray(n.params))try{if("close"===n.method&&t.database)return void t.send(Yo(n,null));if("close"===n.method&&O(c).connectionIds.size>1)return t.send(Yo(n,null)),O(c).connectionIds.delete(o),void u.forEach((t=>t.unsubscribe()));r="getChangedDocumentsSince"!==n.method||l.getChangedDocumentsSince?await l[n.method](n.params[0],n.params[1],n.params[2],n.params[3]):await zn(l,n.params[0],n.params[1]),"close"!==n.method&&"remove"!==n.method||y(),t.send(Yo(n,r))}catch(e){t.send(Qo(n,e))}}))),t.send(Yo(n,"ok"))}function y(){f||(f=!0,u.forEach((t=>t.unsubscribe())),O(c).connectionIds.delete(o),e.delete(s))}}))}(e)}({storage:function(t={}){return Uo({name:Vo,abstractFilesystem:new Lo,abstractLock:navigator.locks,jsonPositionSize:t.jsonPositionSize?t.jsonPositionSize:ge,inWorker:!t.usesRxDatabaseInWorker})}({jsonPositionSize:14})})})()})();